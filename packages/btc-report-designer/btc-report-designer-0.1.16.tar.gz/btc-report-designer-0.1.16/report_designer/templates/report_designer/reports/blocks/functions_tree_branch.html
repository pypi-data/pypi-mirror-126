{% load report_designer.fields %}
{% load report_designer.utils %}


<ul class="tree-content js-tree-content{% if has_subtree %} subtree{% endif %}" {% if has_subtree %} style="display: none"{% endif %}>
    {% if tree_branches %}
        {% for tree_branch in tree_branches %}
            <li>
                <div class="tree-branch js-tree-branch">
                    <div class="subtree-data js-subtree-data">
                        {% if tree_branch.tree_branches %}
                            <span class="subtree-btn js-subtree-btn"></span>
                            <span class="subtree-title">{{ tree_branch.title }}</span>
                        {% else %}
                            <span class="subtree-title tree-branch-click-add js-tree-function-btn"
                                  data-name="{{ tree_branch.name }}"
                                  data-display-name="{{ tree_branch.display_name }}"
                                  data-is-editable="{{ tree_branch.is_editable }}">
                                {{ tree_branch.title }}
                            </span>
                        {% endif %}
                    </div>
                    {% if tree_branch.tree_branches %}
                        {% include 'report_designer/reports/blocks/functions_tree_branch.html' with has_subtree=tree_branch.has_subtree tree_branches=tree_branch.tree_branches only %}
                    {% endif %}
                </div>
            </li>
        {% endfor %}
    {% endif %}
</ul>
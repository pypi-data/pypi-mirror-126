var at=Object.defineProperty,nt=Object.defineProperties;var lt=Object.getOwnPropertyDescriptors;var Se=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var fe=(l,t,s)=>t in l?at(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s,g=(l,t)=>{for(var s in t||(t={}))st.call(t,s)&&fe(l,s,t[s]);if(Se)for(var s of Se(t))rt.call(t,s)&&fe(l,s,t[s]);return l},v=(l,t)=>nt(l,lt(t));var I=(l,t,s)=>(fe(l,typeof t!="symbol"?t+"":t,s),s);import{m as pe,c as ot,u as it,d as h,a as se,r as $,o as u,b as c,w as a,e as n,f as e,R as ut,N as Ue,S as W,g as re,h as F,i as R,z as dt,j as ct,k as _t,l as ft,n as pt,p as ht,q as mt,s as gt,t as vt,v as yt,x as bt,y as $t,A as xt,B as wt,C as kt,D as Nt,E as ee,F as Ce,G as N,H as he,I as te,J as S,K as y,L as Te,M as H,O as Me,P as je,Q as Le,T as m,U as x,V as Z,W as oe,X as T,Y as ie,Z as w,_ as K,$ as me,a0 as It,a1 as ze,a2 as U,a3 as V,a4 as St,a5 as P,a6 as Q,a7 as q,a8 as D,a9 as M,aa as Ee,ab as ae,ac as Ut,ad as ge,ae as ve,af as Re,ag as De,ah as ye,ai as A,aj as ue,ak as de,al as be,am as ce,an as Pe,ao as Ct,ap as Tt,aq as Mt,ar as jt,as as Lt,at as Ae,au as zt,av as Et,aw as G,ax as ne,ay as Rt,az as Dt,aA as Pt,aB as At,aC as $e,aD as Ot,aE as Bt,aF as Oe,aG as Be,aH as Ft,aI as Ht,aJ as xe,aK as Vt,aL as Fe,aM as qt,aN as Gt,aO as Jt,aP as Wt,aQ as Zt,aR as Kt,aS as Qt,aT as Xt,aU as He,aV as Ve,aW as Yt,aX as qe,aY as ea,aZ as ta,a_ as aa}from"./vendor.d2e32027.js";const na=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};na();function we(l){return(l==null?void 0:l.startsWith("./"))||(l==null?void 0:l.startsWith("../"))||l=="."||l==".."}function Ge(l){const t=(l.match(/[\u4E00-\u9FA5]/g)||[]).length,s=(l.replace(/[\u4E00-\u9FA5]/g,"").match(/[a-zA-Z0-9_\u0392-\u03c9\u0400-\u04FF]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|[\u00E4\u00C4\u00E5\u00C5\u00F6\u00D6]+|\w+/g)||[]).length;return[t,s]}function la(l,{cn:t=300,en:s=160}={}){var r=Ge(l),o=r[0]/t+r[1]/s;return o}function sa(l){var t=Ge(l),s=t[0]+t[1];return s}function ra(l){return l.replace(/\&\#[0-9]*;|&amp;/g,function(t){return t.match(/amp/)?"&":String.fromCharCode(parseInt(t.match(/[0-9]+/)[0]))})}var J=new pe.Renderer;J.link=function(l,t,s){return s};J.paragraph=function(l){return ra(l)+`\r
`};J.heading=function(l,t){return t+") "+l};J.blockquote=function(l){return l};J.codespan=function(l){return l};J.list=function(l,t,s){return l};J.image=function(l,t,s){return""};J.code=function(l,t,s){return""};function Je(l){return l}class oa{constructor(t){I(this,"baseUrl");this.baseUrl=t}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let r=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return v(g({},r),{metadata:v(g({},r.metadata),{creation:new Date(r.metadata.creation.toString()),modification:new Date(r.metadata.modification.toString())}),dataUrl:this.resolveRelativeUrl(t)})}notes(t){return new ia(`${this.baseUrl}/${t}/notes`,this.resolveRelativeUrl(t,"./notes"))}async update(t){let s=v(g({},t),{metadata:v(g({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(s),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}`,{method:"DELETE"})}resolveRelativeUrl(t,s="."){return we(s)?`${this.baseUrl}/${t}/${s}`:s}}class ia{constructor(t,s){I(this,"baseUrl");I(this,"dataUrl");this.baseUrl=t,this.dataUrl=s}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let r=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return v(g({},r),{metadata:v(g({},r.metadata),{creation:new Date(r.metadata.creation.toString()),modification:new Date(r.metadata.modification.toString())}),dataUrl:this.dataUrl})}async update(t){let s=v(g({},t),{metadata:v(g({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(s),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}/`,{method:"DELETE"})}}class We{constructor(t){I(this,"baseUrl");I(this,"materials");this.baseUrl=t,this.materials=new oa(`${this.baseUrl}/materials`)}async metadata(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async title(){let t=(await this.metadata()).site.title;return t==""?"Paperead":t}}const Ze=Symbol(),ua="/api",da=ot({state(){return{api:new We(ua),readerMode:!1}},mutations:{setApiUrl(l,t){l.api=new We(t)},setReaderMode(l,t){l.readerMode=t}}});function L(){return it(Ze)}const ca=h({setup(l){return se(),$("home"),(t,s)=>(u(),c(W,null,{default:a(()=>[n(e(ut))]),fallback:a(()=>[n(e(Ue),{size:80,id:"loading-spin",style:{width:"100%"}})]),_:1}))}});var O=(l,t)=>{for(const[s,r]of t)l[s]=r;return l};const _a=h({setup(l){re();const t=L(),s=F(),r="#f9f5e9FF",o={common:{baseColor:r,popoverColor:r,tableColor:r,cardColor:r,modalColor:r,bodyColor:r,tagColor:r,inputColor:r,codeColor:r,tabColor:r,actionColor:r,tableHeaderColor:r,hoverColor:r,inputColorDisabled:r}},i=R(()=>t.state.readerMode&&s.value!="dark"),d=R(()=>{let _=navigator.language;return _.indexOf("zh")!=-1?{lang:dt,date:ct}:_.indexOf("ru")!=-1?{lang:_t,date:ft}:_.indexOf("uk")!=-1?{lang:pt,date:ht}:_.indexOf("ja")!=-1?{lang:mt,date:gt}:_.indexOf("id")!=-1?{lang:vt,date:yt}:{lang:bt,date:$t}});return(_,f)=>(u(),c(e(wt),{style:{height:"100%"},theme:e(s)=="dark"?e(xt):null,"theme-overrides":e(i)?o:{},locale:e(d).lang,"date-locale":e(d).date},{default:a(()=>[n(e(Nt),null,{default:a(()=>[n(e(kt)),(u(),c(W,null,{default:a(()=>[n(ca)]),fallback:a(()=>[n(e(Ue),{size:80,id:"loading-spin"})]),_:1}))]),_:1})]),_:1},8,["theme","theme-overrides","locale","date-locale"]))}});var fa=O(_a,[["__scopeId","data-v-41fa4579"]]);const pa=h({props:{scroll:null},setup(l){const t=l,s=R(()=>{var r;return(r=t.scroll)!=null?r:!1});return(r,o)=>e(s)?(u(),c(e(te),{key:0,style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(e(Ce),{bordered:"",class:"page-header"},{default:a(()=>[ee(r.$slots,"header",{},void 0,!0)]),_:3}),n(e(N),null,{default:a(()=>[ee(r.$slots,"default",{},void 0,!0)]),_:3}),n(e(he),{right:100})]),_:3})):(u(),c(e(te),{key:1,style:{height:"100%"}},{default:a(()=>[n(e(Ce),{bordered:"",class:"page-header"},{default:a(()=>[ee(r.$slots,"header",{},void 0,!0)]),_:3}),n(e(N),{class:"page-content-scroll","content-style":"height: 100%;","native-scrollbar":!1},{default:a(()=>[ee(r.$slots,"default",{},void 0,!0)]),_:3})]),_:3}))}});var ke=O(pa,[["__scopeId","data-v-cef6b4f8"]]);const ha=m("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),ma=m("a",{href:"https://github.com/StardustDL/paperead/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),ga=m("a",{href:"https://github.com/StardustDL/paperead",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),va=["href"];async function ya(l){let t,s;const r=([t,s]=S(async()=>([t,s]=S(()=>fetch("/build.json")),t=await t,s(),t).json()),t=await t,s(),t);return(o,i)=>(u(),c(e(T),{size:"large"},{default:a(()=>[n(e(H),{label:"Author"},{prefix:a(()=>[n(e(y),null,{default:a(()=>[n(e(Te))]),_:1})]),default:a(()=>[ha]),_:1}),n(e(H),{label:"License"},{prefix:a(()=>[n(e(y),null,{default:a(()=>[n(e(Me))]),_:1})]),default:a(()=>[ma]),_:1}),n(e(H),{label:"Source Code"},{prefix:a(()=>[n(e(y),null,{default:a(()=>[n(e(je))]),_:1})]),default:a(()=>[ga]),_:1}),n(e(H),{label:"Commit"},{prefix:a(()=>[n(e(y),null,{default:a(()=>[n(e(Le))]),_:1})]),default:a(()=>[m("a",{href:`https://github.com/StardustDL/paperead/commit/${e(r).commit}`,style:{"text-decoration":"none",color:"inherit"}},x(e(r).shortCommit),9,va)]),_:1}),n(e(H),{label:"Build Date"},{prefix:a(()=>[n(e(y),null,{default:a(()=>[n(e(Z))]),_:1})]),default:a(()=>[n(e(oe),{time:new Date(e(r).date),type:"relative"},null,8,["time"])]),_:1})]),_:1}))}const ba={components:{BrandGithub:je,At:Te,License:Me,GitCommit:Le,Clock:Z}},$a=h(v(g({},ba),{setup:ya}));async function xa(l){let t,s;const r=L(),o=([t,s]=S(()=>r.state.api.title()),t=await t,s(),t);return(i,d)=>(u(),c(e(me),null,{default:a(()=>[n(e(K),{to:"/"},{default:a(()=>[n(e(y),null,{default:a(()=>[n(e(ie))]),_:1}),w(" "+x(e(o)),1)]),_:1})]),_:1}))}const wa={components:{HomeIcon:ie}},Ne=h(v(g({},wa),{setup:xa})),ka=m("span",null,"Creation:",-1),Na=w("\xA0 "),Ia=m("br",null,null,-1),Sa=m("span",null,"Modification:",-1),Ua=w("\xA0 ");function Ca(l){const t=l;return(s,r)=>(u(),c(e(It),null,{trigger:a(()=>[n(e(T),{size:"small"},{default:a(()=>[n(e(y),{size:"large"},{default:a(()=>[n(e(Z))]),_:1}),n(e(oe),{time:t.creation,type:"relative"},null,8,["time"])]),_:1})]),default:a(()=>[ka,Na,n(e(oe),{time:t.creation},null,8,["time"]),Ia,Sa,Ua,n(e(oe),{time:l.modification},null,8,["time"])]),_:1}))}const Ta={components:{Clock:Z}},Ma=h(v(g({},Ta),{props:{creation:null,modification:null},setup:Ca}));function ja(l){const t=l;return(s,r)=>(u(),c(e(T),{size:"small"},{default:a(()=>[n(e(y),{size:"large"},{default:a(()=>[n(e(ze))]),_:1}),(u(!0),U(P,null,V(t.tags,o=>(u(),c(e(St),{key:o,size:"small"},{default:a(()=>[w(x(o),1)]),_:2},1024))),128))]),_:1}))}const La={components:{Tag:ze}},za=h(v(g({},La),{props:{tags:null},setup:ja}));function Ea(l){const t=l,s=R(()=>{let r=sa(t.content);return r<1e3?r.toString():`${Math.round(r/1e3)}k`});return(r,o)=>(u(),c(e(T),{size:"small"},{default:a(()=>[n(e(y),{size:"large"},{default:a(()=>[n(e(Q))]),_:1}),m("span",null,x(e(s)),1)]),_:1}))}const Ra={components:{FileText:Q}},Da=h(v(g({},Ra),{props:{content:null},setup:Ea}));function Pa(l){const t=l,s=R(()=>{let r=la(t.content);return r<=1?"1 minute":`${Math.round(r)} minutes`});return(r,o)=>(u(),c(e(T),{size:"small"},{default:a(()=>[n(e(y),{size:"large"},{default:a(()=>[n(e(Z))]),_:1}),m("span",null,x(e(s)),1)]),_:1}))}const Aa={components:{Clock:Z}},Oa=h(v(g({},Aa),{props:{content:null},setup:Pa})),_e=h({props:{data:null},setup(l){return(t,s)=>(u(),c(e(T),null,{default:a(()=>[n(Ma,{creation:l.data.metadata.creation,modification:l.data.metadata.modification},null,8,["creation","modification"]),l.data.metadata.tags.length>0?(u(),c(za,{key:0,tags:l.data.metadata.tags},null,8,["tags"])):q("",!0),n(Da,{content:l.data.content},null,8,["content"]),n(Oa,{content:l.data.content},null,8,["content"])]),_:1}))}});const Ba=h({props:{id:null},setup(l){const t=l,s=L(),r=$();async function o(){r.value=await s.state.api.materials.get(t.id)}return D(o),M(t,o),(i,d)=>r.value?(u(),c(e(ae),{key:0,hoverable:""},{header:a(()=>[n(e(K),{to:`/${r.value.id}`},{default:a(()=>[w(x(r.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(_e,{data:r.value},null,8,["data"])]),default:a(()=>[r.value.content.length>0?(u(),c(e(Ee),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[w(x(e(Je)(r.value.content)),1)]),_:1})):q("",!0)]),_:1})):q("",!0)}});var Fa=O(Ba,[["__scopeId","data-v-2e77ee33"]]);const Ke=h({props:{items:null},setup(l){const t=l,s=$([]),r=$(1),o=$(5);function i(){let d=(r.value-1)*o.value;s.value=t.items.slice(d,d+o.value)}return M(r,i),M(o,i),D(i),M(t,()=>r.value=1),(d,_)=>(u(),c(e(T),{vertical:""},{default:a(()=>[(u(!0),U(P,null,V(s.value,f=>(u(),c(W,{key:f},{default:a(()=>[ee(d.$slots,"default",{item:f})]),fallback:a(()=>[n(e(ge),{text:"",repeat:2})]),_:2},1024))),128)),n(e(Ut),{style:{"justify-content":"center","margin-top":"20px"},"item-count":l.items.length,"page-size":o.value,"onUpdate:page-size":_[0]||(_[0]=f=>o.value=f),page:r.value,"onUpdate:page":_[1]||(_[1]=f=>r.value=f),"page-sizes":[5,10,20],"show-quick-jumper":"","show-size-picker":""},null,8,["item-count","page-size","page"])]),_:3}))}}),Ha=h({async setup(l){let t,s;const r=L(),o=([t,s]=S(()=>r.state.api.materials.all()),t=await t,s(),t);return(i,d)=>(u(),c(Ke,{items:e(o)},{default:a(_=>[n(Fa,{id:_.item},null,8,["id"])]),_:1},8,["items"]))}});const Va={key:0},qa=w("Reading"),Ga=w("\xA0and "),Ja=w("Notes"),Wa={key:1},Za=["href"],Ka=["href"],Qa=["href"];async function Xa(l){let t,s;const r=L(),o=se(),i=F(),d=R(()=>r.state.readerMode&&i.value!="dark");function _(B=!0){r.commit("setReaderMode",B)}const f="0.2.0",p=([t,s]=S(()=>r.state.api.metadata()),t=await t,s(),t),b=p.site.subtitle!=""?p.site.subtitle:"\u9605\u8BFB\u4E0E\u7B14\u8BB0",k=p.site.description!=""?p.site.description:`Welcome to ${[t,s]=S(()=>r.state.api.title()),t=await t,s(),t}.`;return document.title=`Home - ${[t,s]=S(()=>r.state.api.title()),t=await t,s(),t}`,(B,C)=>(u(),c(ke,null,{header:a(()=>[n(e(be),{subtitle:e(b),onBack:C[1]||(C[1]=()=>e(o).back())},{avatar:a(()=>[n(e(ve),null,{default:a(()=>[n(e(y),null,{default:a(()=>[n(e(Re))]),_:1})]),_:1})]),title:a(()=>[e(p).site.title==""?(u(),U("span",Va,[n(e(De),{type:"info"},{default:a(()=>[qa]),_:1}),Ga,n(e(De),{type:"success"},{default:a(()=>[Ja]),_:1})])):(u(),U("span",Wa,x(e(p).site.title),1))]),header:a(()=>[n(e(ye),null,{default:a(()=>[n(Ne)]),_:1})]),extra:a(()=>[n(e(A),{size:"large",bordered:!1,title:"Reader mode",onClick:C[0]||(C[0]=()=>_(!e(d)))},{icon:a(()=>[n(e(y),null,{default:a(()=>[e(d)?(u(),c(e(ue),{key:0})):(u(),c(e(de),{key:1}))]),_:1})]),_:1})]),footer:a(()=>[w(x(e(k)),1)]),_:1},8,["subtitle"])]),default:a(()=>[n(e(Pe),{type:"segment",style:{height:"100%"}},{default:a(()=>[n(e(ce),{name:"info",tab:"Information",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(e(N),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(e(T),{vertical:"",size:"large"},{default:a(()=>[n(e(ae),{title:"Server",hoverable:"",embedded:""},{default:a(()=>[n(e(T),{size:"large"},{default:a(()=>[n(e(H),{label:"Server Endpoint"},{default:a(()=>[m("a",{href:e(r).state.api.baseUrl},x(e(r).state.api.baseUrl),9,Za)]),_:1}),n(e(H),{label:"Server Version"},{default:a(()=>[m("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(p).version}`},x(e(p).version),9,Ka)]),_:1}),n(e(H),{label:"Client Version"},{default:a(()=>[m("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(f)}`},x(e(f)),9,Qa)]),_:1})]),_:1})]),_:1}),n(e(ae),{title:"Paperead",hoverable:"",embedded:""},{default:a(()=>[(u(),c(W,null,{default:a(()=>[n($a)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),n(e(ce),{name:"materials",tab:"Materials",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(e(N),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(Ha)]),_:1})]),_:1})]),_:1})]),_:1}))}const Ya={components:{Notebook:Re,MaterialsIcon:Ct,EnableReaderIcon:de,DisableReaderIcon:ue}},en=h(v(g({},Ya),{setup:Xa}));var tn=O(en,[["__scopeId","data-v-6301dc44"]]);const an=w("Home");async function nn(l){let t,s;const r=L(),i=re().params;return document.title=`Not Found - ${[t,s]=S(()=>r.state.api.title()),t=await t,s(),t}`,(d,_)=>(u(),c(e(Tt),{status:"404",title:"Not Found",description:`Path: /${e(i).path.join("/")}`,style:{margin:"50px"}},{footer:a(()=>[n(e(A),null,{icon:a(()=>[n(e(y),null,{default:a(()=>[n(e(ie))]),_:1})]),default:a(()=>[n(e(K),{to:"/"},{default:a(()=>[an]),_:1})]),_:1})]),_:1},8,["description"]))}const ln={components:{HomeIcon:ie,AlertCircle:Mt}},sn=h(v(g({},ln),{setup:nn}));var rn=O(sn,[["__scopeId","data-v-6390192a"]]);const on=m("thead",null,[m("tr",null,[m("th",null,"Key"),m("th",null,"Value")])],-1);function un(l){const t=l,s=R(()=>{let r=[];for(let o in t.data.metadata.targets){let i=t.data.metadata.targets[o],d=we(i)?`${t.data.dataUrl}/${i}`:i;r.push({label:()=>jt("a",{target:"_blank",href:d},o),key:o})}return r});return(r,o)=>(u(),c(e(T),null,{default:a(()=>[Object.keys(l.data.metadata.extra).length>0?(u(),c(e(Lt),{key:0,placement:"bottom-start",trigger:"hover"},{trigger:a(()=>[n(e(A),{bordered:!1,size:"large",title:"Extra"},{icon:a(()=>[n(e(y),null,{default:a(()=>[n(e(Ae))]),_:1})]),_:1})]),default:a(()=>[n(e(zt),null,{default:a(()=>[on,m("tbody",null,[(u(!0),U(P,null,V(l.data.metadata.extra,(i,d)=>(u(),U("tr",{key:d},[m("td",null,x(d),1),m("td",null,x(i),1)]))),128))])]),_:1})]),_:1})):q("",!0),Object.keys(l.data.metadata.targets).length>0?(u(),c(e(Et),{key:1,options:e(s),placement:"bottom-start"},{default:a(()=>[n(e(A),{bordered:!1,size:"large",title:"Targets"},{icon:a(()=>[n(e(y),null,{default:a(()=>[n(e(G))]),_:1})]),_:1})]),_:1},8,["options"])):q("",!0)]),_:1}))}const dn={components:{Book:ne,ArrowRight:Rt,ExternalLink:G,InfoSquare:Ae}},Qe=h(v(g({},dn),{props:{data:null},setup:un}));function cn(l){return(t,s)=>(u(),c(e(me),null,{default:a(()=>[n(e(K),{to:`/${l.id}`},{default:a(()=>[n(e(y),null,{default:a(()=>[n(e(ne))]),_:1}),w(" "+x(l.id),1)]),_:1},8,["to"])]),_:1}))}const _n={components:{MaterialIcon:ne}},Xe=h(v(g({},_n),{props:{id:null},setup:cn})),fn=h({props:{value:null},setup(l){const t=l;return(s,r)=>{const o=Dt("MarkdownPreviewOutlineItem",!0);return u(),c(e(Pt),{title:t.value.title,href:t.value.href},{default:a(()=>[(u(!0),U(P,null,V(t.value.children,i=>(u(),c(o,{key:i.href,value:i},null,8,["value"]))),128))]),_:1},8,["title","href"])}}});class pn{constructor(t="",s="",r){I(this,"title","");I(this,"href","");I(this,"children",[]);this.title=t,this.href=s,r==null&&(r=[]),this.children=r}}const hn=h({props:{element:null},setup(l,{expose:t}){const s=l,r=$();function o(d){var k,B,C;let f=(k=d.children[0].getAttribute("data-target-id"))!=null?k:"",p=(C=(B=document.getElementById(f))==null?void 0:B.innerText)!=null?C:f,b=new pn(p,`#${f}`);if(d.children.length>1){let X=d.children[1];for(let Y=0;Y<X.children.length;Y++)b.children.push(o(X.children[Y]))}return b}async function i(){if(s.element==null)return!1;let d=document.createElement("div");if($e.outlineRender(s.element,d),d.children.length==0)return r.value=[],!1;let _=d.children[0],f=[];for(let p=0;p<_.children.length;p++)f.push(o(_.children[p]));return r.value=f,!0}return D(i),M(s,i),t({renderOutline:i}),(d,_)=>(u(),c(e(At),{type:"block","listen-to":l.element,"ignore-gap":!0},{default:a(()=>[(u(!0),U(P,null,V(r.value,f=>(u(),c(fn,{key:f.href,value:f},null,8,["value"]))),128))]),_:1},8,["listen-to"]))}});function mn(l,{expose:t}){const s=l,r=L(),o=F(),i=R(()=>{var z;return(z=s.baseUrl)!=null?z:""}),d=R(()=>o.value=="dark"?"dark":"light"),_=$(),f=$(),p=$(!0),b=$(!1),k=R(()=>r.state.readerMode&&o.value!="dark"),B=$(!1);async function C(){await $e.preview(_.value,s.value,{mode:d.value,speech:{enable:!0},hljs:{lineNumber:!0,style:d.value=="dark"?"dracula":k.value?"monokailight":"github"},markdown:{linkBase:i.value,mark:!0},theme:{current:d.value}}),B.value=await f.value.renderOutline();{let z=_.value.getElementsByTagName("img");for(let E=0;E<z.length;E++){let j=z.item(E);j!=null&&(j.onclick=le=>{$e.previewImage(j,void 0,d.value)})}}}function X(z=!0){b.value=z}function Y(z=!0){r.commit("setReaderMode",z)}return D(C),M(s,C),M(o,C),M(k,C),t({fullscreen:X}),(z,E)=>(u(),c(e(te),{class:Vt(b.value?"fullscreen":"normal"),"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[m("article",{ref:(j,le)=>{le.element=j,_.value=j},style:{"padding-bottom":"200px"}},null,512),n(e(he),{right:p.value?50:250,style:Ot(b.value?{"z-index":2}:{})},null,8,["right","style"])]),_:1}),n(e(xe),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1,collapsed:p.value,"onUpdate:collapsed":E[2]||(E[2]=j=>p.value=j)},{default:a(()=>[n(e(N),{style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(T),null,{default:a(()=>[n(e(Bt),null,{default:a(()=>[n(e(A),{title:"Full screen",onClick:E[0]||(E[0]=()=>X(!b.value))},{icon:a(()=>[n(e(y),null,{default:a(()=>[b.value?(u(),c(e(Oe),{key:0})):(u(),c(e(Be),{key:1}))]),_:1})]),_:1}),n(e(A),{title:"Reader mode",onClick:E[1]||(E[1]=()=>Y(!e(k)))},{icon:a(()=>[n(e(y),null,{default:a(()=>[e(k)?(u(),c(e(ue),{key:0})):(u(),c(e(de),{key:1}))]),_:1})]),_:1})]),_:1}),Ft(n(hn,{element:_.value,ref:(j,le)=>{le.outline=j,f.value=j}},null,8,["element"]),[[Ht,B.value]])]),_:1})]),_:1})]),_:1},8,["collapsed"])]),_:1},8,["class"]))}const gn={components:{Maximize:Be,Minimize:Oe,EnableReaderIcon:de,DisableReaderIcon:ue}},vn=h(v(g({},gn),{props:{value:null,baseUrl:null},setup:mn}));var yn=O(vn,[["__scopeId","data-v-00ede2da"]]);const bn=h({props:{data:null},setup(l){return(t,s)=>(u(),c(yn,{value:l.data.content,"base-url":l.data.dataUrl},null,8,["value","base-url"]))}});const $n=h({props:{css:null},setup(l){const t=l,s=document.getElementsByTagName("head")[0],r=[];function o(){for(let d of r)s.removeChild(d);r.length=0}function i(){if(o(),t.css!=null)for(let d of t.css){let _=document.createElement("link");_.type="text/css",_.rel="stylesheet",_.href=d,s.appendChild(_),r.push(_)}}return D(i),M(t,i),Fe(o),()=>{}}}),xn={class:"slides"},wn={"data-markdown":"","data-separator":"^\\r?\\n===\\r?\\n$","data-separator-vertical":"^\\r?\\n---\\r?\\n$","data-separator-notes":"notes?:"},kn={"data-template":""},Nn=h({props:{data:null},setup(l){const t=l,s=F(),r=$(),o=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/white.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css"],i=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/black.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai.min.css"];return D(()=>{new qt({plugins:[Gt,Jt,Wt,Zt,Kt,Qt],center:!1,markdown:{baseUrl:t.data.dataUrl,smartLists:!0,smartypants:!0},slideNumber:"c/t",hash:!0,embedded:!0}).initialize()}),(d,_)=>(u(),U(P,null,[n($n,{css:e(s)=="dark"?i:o},null,8,["css"]),m("div",{class:"reveal",ref:(f,p)=>{p.element=f,r.value=f}},[m("div",xn,[m("section",wn,[m("textarea",kn,x(l.data.content),1)])])],512)],64))}}),In=h({props:{data:null},setup(l){return F(),(t,s)=>(u(),c(Nn,{data:l.data},null,8,["data"]))}});class Sn{constructor(t){I(this,"title");I(this,"url","");I(this,"description","");I(this,"cover","");I(this,"renderedDescription","");this.title=t}}function Ie(l){let t=[],s=pe.lexer(l.content),r=0;for(;r<s.length;){let o=null;for(;o==null&&r<s.length;){let i=s[r];i.type=="heading"&&i.depth==1&&(o=i.text),r++}if(o!=null){let i=new Sn(o);for(;r<s.length;){let d=s[r];if(d.type=="heading"&&d.depth==1)break;let _=!1;if(d.type=="paragraph"){for(let f of d.tokens)if(f.type=="image"||f.type=="link"){let p=f.href;switch(we(p)&&(p=`${l.dataUrl}/${p}`),f.text){case"url":i.url==""&&(i.url=p,_=!0);break;case"cover":i.cover==""&&(i.cover=p,_=!0);break}}}_||(i.description+=d.raw),r++}i.renderedDescription=pe(i.description,{baseUrl:l.dataUrl,headerIds:!1,smartLists:!0,smartypants:!0}),t.push(i)}}return t}const Un=["innerHTML"];function Cn(l){const t=l;F();const s=$(),r=$([]),o=$(0),i=$();function d(f=!1){var b,k;if(r.value.length==0)return;o.value>=r.value.length&&(o.value=r.value.length-1);let p=r.value[o.value];(b=i.value)==null||b.switchVideo({url:p.url,pic:p.cover},void 0),f&&((k=i.value)==null||k.play())}function _(f){f.length!=0&&(o.value=parseInt(f[0]),d())}return D(()=>{i.value=new Xt({container:s.value,screenshot:!0,video:{url:""}}),i.value.on("ended",()=>{}),r.value=Ie(t.data),d()}),Fe(()=>{i.value!=null&&i.value.destroy()}),(f,p)=>(u(),c(e(te),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:a(()=>[m("div",{ref:(b,k)=>{k.container=b,s.value=b}},null,512)]),_:1}),n(e(xe),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(He),{accordion:!0,"arrow-placement":"right","expanded-names":o.value.toString(),onUpdateExpandedNames:_},{default:a(()=>[(u(!0),U(P,null,V(r.value,(b,k)=>(u(),c(e(Ve),{title:b.title,name:k.toString()},{"header-extra":a(()=>[n(e(A),{bordered:!1,size:"large",href:b.url,tag:"a",target:"_blank"},{icon:a(()=>[n(e(y),null,{default:a(()=>[n(e(G))]),_:1})]),_:2},1032,["href"])]),default:a(()=>[m("div",{innerHTML:b.renderedDescription},null,8,Un)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1}))}const Tn={components:{ExternalLink:G}},Mn=h(v(g({},Tn),{props:{data:null},setup:Cn})),jn=["innerHTML"];function Ln(l){const t=l;F(),$();const s=$([]),r=$(),o=$(0);function i(){if(s.value.length==0){r.value=void 0;return}o.value>=s.value.length&&(o.value=s.value.length-1),r.value=s.value[o.value]}return D(()=>{s.value=Ie(t.data)}),M(s,i),M(o,i),(d,_)=>(u(),c(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 20px;"},{default:a(()=>[n(e(T),{style:{"justify-content":"center"}},{default:a(()=>[(u(!0),U(P,null,V(s.value,(f,p)=>(u(),c(e(ae),{hoverable:"",embedded:"",title:f.title,key:p,style:{"max-width":"300px"}},{cover:a(()=>[n(e(Yt),{"object-fit":"cover",alt:f.title,src:f.url},null,8,["alt","src"])]),"header-extra":a(()=>[n(e(A),{bordered:!1,size:"large",href:f.url,tag:"a",target:"_blank"},{icon:a(()=>[n(e(y),null,{default:a(()=>[n(e(G))]),_:1})]),_:2},1032,["href"])]),default:a(()=>[m("div",{innerHTML:f.renderedDescription},null,8,jn)]),_:2},1032,["title"]))),128))]),_:1}),n(e(he),{right:"100"})]),_:1}))}const zn={components:{ExternalLink:G}},En=h(v(g({},zn),{props:{data:null},setup:Ln})),Rn=["src"],Dn=["innerHTML"];function Pn(l){const t=l;F();const s=$([]),r=$(0);function o(i){i.length!=0&&(r.value=parseInt(i[0]))}return D(()=>{s.value=Ie(t.data)}),(i,d)=>(u(),c(e(te),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:a(()=>[r.value<s.value.length?(u(),U("iframe",{key:0,height:"100%",width:"100%",src:s.value[r.value].url,style:{border:"0"}},null,8,Rn)):q("",!0)]),_:1}),n(e(xe),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(He),{accordion:!0,"arrow-placement":"right","expanded-names":r.value.toString(),onUpdateExpandedNames:o},{default:a(()=>[(u(!0),U(P,null,V(s.value,(_,f)=>(u(),c(e(Ve),{title:_.title,name:f.toString()},{"header-extra":a(()=>[n(e(A),{bordered:!1,size:"large",href:_.url,tag:"a",target:"_blank"},{icon:a(()=>[n(e(y),null,{default:a(()=>[n(e(G))]),_:1})]),_:2},1032,["href"])]),default:a(()=>[m("div",{innerHTML:_.renderedDescription},null,8,Dn)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1}))}const An={components:{ExternalLink:G}},On=h(v(g({},An),{props:{data:null},setup:Pn})),Bn=["srcdoc"],Fn=h({props:{data:null},setup(l){return(t,s)=>(u(),c(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:a(()=>[m("iframe",{height:"100%",width:"100%",srcdoc:l.data.content,style:{border:"0"}},null,8,Bn)]),_:1}))}}),Hn={key:0},Ye=h({props:{data:null},setup(l){return(t,s)=>l.data.metadata.schema=="empty"?(u(),U("span",Hn,"Empty data")):l.data.metadata.schema=="slides"?(u(),c(In,{key:1,data:l.data},null,8,["data"])):l.data.metadata.schema=="media"?(u(),c(Mn,{key:2,data:l.data},null,8,["data"])):l.data.metadata.schema=="image"?(u(),c(En,{key:3,data:l.data},null,8,["data"])):l.data.metadata.schema=="pdf"?(u(),c(On,{key:4,data:l.data},null,8,["data"])):l.data.metadata.schema=="html"?(u(),c(Fn,{key:5,data:l.data},null,8,["data"])):(u(),c(bn,{key:6,data:l.data},null,8,["data"]))}});const Vn=h({props:{id:null,noteId:null},setup(l){const t=l,s=L(),r=$();async function o(){r.value=await s.state.api.materials.notes(t.id).get(t.noteId)}return D(o),M(t,o),(i,d)=>r.value?(u(),c(e(ae),{key:0,hoverable:""},{header:a(()=>[n(e(K),{to:`/${t.id}/${r.value.id}`},{default:a(()=>[w(x(r.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(_e,{data:r.value},null,8,["data"])]),default:a(()=>[r.value.content.length>0?(u(),c(e(Ee),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[w(x(e(Je)(r.value.content)),1)]),_:1})):q("",!0)]),_:1})):q("",!0)}});var qn=O(Vn,[["__scopeId","data-v-b020cbb0"]]);async function Gn(l){let t,s;const r=l,o=L(),i=([t,s]=S(()=>o.state.api.materials.notes(r.id).all()),t=await t,s(),t);return(d,_)=>(u(),c(e(N),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:a(()=>[n(Ke,{items:e(i)},{default:a(f=>[n(qn,{id:l.id,noteId:f.item},null,8,["id","noteId"])]),_:1},8,["items"])]),_:1}))}const Jn={components:{NotesIcon:qe}},Wn=h(v(g({},Jn),{props:{id:null},setup:Gn}));async function Zn(l){let t,s;const r=re(),o=se(),i=L(),d=r.params,_=([t,s]=S(()=>i.state.api.materials.get(d.id)),t=await t,s(),t);return document.title=`${_.metadata.name} - ${[t,s]=S(()=>i.state.api.title()),t=await t,s(),t}`,(f,p)=>(u(),c(ke,null,{header:a(()=>[n(e(be),{onBack:p[0]||(p[0]=()=>e(o).back())},{title:a(()=>[w(x(e(_).metadata.name),1)]),header:a(()=>[n(e(ye),null,{default:a(()=>[n(Ne),n(Xe,{id:e(_).id},null,8,["id"])]),_:1})]),avatar:a(()=>[n(e(ve),null,{default:a(()=>[n(e(y),null,{default:a(()=>[n(e(ne))]),_:1})]),_:1})]),extra:a(()=>[n(Qe,{data:e(_)},null,8,["data"])]),footer:a(()=>[n(_e,{data:e(_)},null,8,["data"])]),_:1})]),default:a(()=>[n(e(Pe),{type:"segment",style:{height:"100%"}},{default:a(()=>[n(e(ce),{name:"description",tab:"Description",style:{height:"calc(100% - 52px)"}},{default:a(()=>[(u(),c(W,null,{default:a(()=>[n(Ye,{data:e(_)},null,8,["data"])]),fallback:a(()=>[n(e(ge),{text:"",repeat:10})]),_:1}))]),_:1}),n(e(ce),{name:"notes",tab:"Notes",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(e(N),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(Wn,{id:e(d).id},null,8,["id"])]),_:1})]),_:1})]),_:1})]),_:1}))}const Kn={components:{MaterialIcon:ne,NotesIcon:qe}},Qn=h(v(g({},Kn),{setup:Zn}));var Xn=O(Qn,[["__scopeId","data-v-3c9989fa"]]);function Yn(l){return(t,s)=>(u(),c(e(me),null,{default:a(()=>[n(e(K),{to:`/${l.id}/${l.noteId}`},{default:a(()=>[n(e(y),null,{default:a(()=>[n(e(Q))]),_:1}),w(" "+x(l.noteId),1)]),_:1},8,["to"])]),_:1}))}const el={components:{NoteIcon:Q}},tl=h(v(g({},el),{props:{id:null,noteId:null},setup:Yn}));async function al(l){let t,s;const r=re(),o=se(),i=L(),d=r.params,_=([t,s]=S(()=>i.state.api.materials.notes(d.id).get(d.noteId)),t=await t,s(),t),f=([t,s]=S(()=>i.state.api.materials.get(d.id)),t=await t,s(),t);return document.title=`${_.metadata.name} - ${f.metadata.name} - ${[t,s]=S(()=>i.state.api.title()),t=await t,s(),t}`,(p,b)=>(u(),c(ke,null,{header:a(()=>[n(e(be),{onBack:b[0]||(b[0]=()=>e(o).back())},{title:a(()=>[w(x(e(_).metadata.name),1)]),header:a(()=>[n(e(ye),null,{default:a(()=>[n(Ne),n(Xe,{id:e(d).id},null,8,["id"]),n(tl,{id:e(d).id,"note-id":e(_).id},null,8,["id","note-id"])]),_:1})]),avatar:a(()=>[n(e(ve),null,{default:a(()=>[n(e(y),null,{default:a(()=>[n(e(Q))]),_:1})]),_:1})]),extra:a(()=>[n(Qe,{data:e(_)},null,8,["data"])]),footer:a(()=>[n(_e,{data:e(_)},null,8,["data"])]),_:1})]),default:a(()=>[n(e(N),{style:{height:"100%"}},{default:a(()=>[(u(),c(W,null,{default:a(()=>[n(Ye,{data:e(_)},null,8,["data"])]),fallback:a(()=>[n(e(ge),{text:"",repeat:10})]),_:1}))]),_:1})]),_:1}))}const nl={components:{NoteIcon:Q}},ll=h(v(g({},nl),{setup:al}));var sl=O(ll,[["__scopeId","data-v-64d5363f"]]);const rl=[{path:"/",component:tn,meta:{title:"Home - Paperead"}},{path:"/:id",component:Xn,meta:{title:"Loading... - Paperead"}},{path:"/:id/:noteId",component:sl,meta:{title:"Loading... - Loading... - Paperead"}},{path:"/:path*",component:rn,meta:{title:"Not found - Paperead"}}],et=ea({history:ta(),routes:rl});et.beforeEach((l,t)=>(l.path==t.path||(document.title=l.meta.title.toString()),!0));const tt=aa(fa);tt.use(et).use(da,Ze);tt.mount("#app");

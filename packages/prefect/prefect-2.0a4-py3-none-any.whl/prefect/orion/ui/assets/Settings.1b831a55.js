var L=Object.defineProperty,F=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var O=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,w=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&O(e,o,t[o]);if(x)for(var o of x(t))K.call(t,o)&&O(e,o,t[o]);return e},S=(e,t)=>F(e,U(t));var h=(e,t,o)=>(O(e,typeof t!="symbol"?t+"":t,o),o);import{O as P,V as R,r as b,o as a,m as k,w as _,d as s,t as u,c as l,l as f,a6 as A,F as y,p as q,b as E,a as $,g as N,q as C}from"./vendor.9c8de484.js";import{_ as T,A as D,E as j}from"./index.992e7f6f.js";var G=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(e,t,o,r)=>{for(var n=r>1?void 0:r?H(t,o):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(r?c(t,o,n):c(n))||n);return r&&n&&G(t,o,n),n};const Q=["cancelled","completed","failed","pending","running","scheduled"],B="orion-color-mode";let I=class extends R{constructor(){super(...arguments);h(this,"colorMode",localStorage.getItem(B)||"Default");h(this,"colorModes",["Default","Achromatomaly","Achromatopsia","Protanomaly","Protaponia","Deuteranomaly","Deuteranopia","Tritanomaly","Tritanopia"]);h(this,"colorMap",{})}showToast(e){this.$toast.add(S(w({},e),{timeout:1e4}))}mounted(){const e=window.getComputedStyle(document.documentElement);this.colorModes.forEach(t=>{const o=t.toLowerCase();this.colorMap[t]=[],Q.forEach(r=>{const n=`--${r}-${o}`,i=e.getPropertyValue(n);i&&this.colorMap[t].push(i)})})}};I=J([P({components:{},watch:{colorMode(e){localStorage.setItem(B,e),document.body.classList.forEach(o=>{o.includes("-color-mode")&&document.body.classList.remove(o)}),document.body.classList.add(e.toLowerCase()+"-color-mode"),this.showToast({type:"success",content:"Color theme saved"})}}})],I);const W=I,X=e=>(q("data-v-9fc654de"),e=e(),E(),e),Y={class:"theme-option d-flex align-center"},Z=X(()=>s("i",{class:"pi pi-palette-line mr-1"},null,-1)),ee={class:"theme-palette ml-auto"},te={class:"theme-option d-flex align-center"},oe={class:"theme-palette ml-auto"};function se(e,t,o,r,n,i){const c=b("Option"),g=b("Select");return a(),k(g,{modelValue:e.colorMode,"onUpdate:modelValue":t[0]||(t[0]=d=>e.colorMode=d),class:"my-2 mr-2",title:"Color mode selector",placeholder:"Color mode",search:""},{active:_(()=>[s("div",Y,[Z,s("span",null,u(e.colorMode),1),s("div",ee,[(a(!0),l(y,null,f(e.colorMap[e.colorMode],d=>(a(),l("div",{key:d,class:"palette-option",style:A({"background-color":d})},null,4))),128))])])]),default:_(()=>[(a(!0),l(y,null,f(e.colorModes,d=>(a(),k(c,{key:d,value:d},{default:_(()=>[s("span",te,[s("span",null,u(d),1),s("div",oe,[(a(!0),l(y,null,f(e.colorMap[d],p=>(a(),l("div",{key:p,class:"palette-option",style:A({"background-color":p})},null,4))),128))])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])}var ne=T(W,[["render",se],["__scopeId","data-v-9fc654de"]]);var ae=Object.defineProperty,re=Object.getOwnPropertyDescriptor,le=(e,t,o,r)=>{for(var n=r>1?void 0:r?re(t,o):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(r?c(t,o,n):c(n))||n);return r&&n&&ae(t,o,n),n};let V=class extends R{constructor(){super(...arguments);h(this,"queries",{settings:D.query({endpoint:j.settings}),version:D.query({endpoint:j.version})});h(this,"resetDatabaseConfirmation","");h(this,"showResetSection",!1)}get settings(){return this.queries.settings.response}get version(){return this.queries.version.response}get settingsSections(){if(!this.settings)return[];const e=S(w({},this.settings),{base:{}});return Object.entries(e).forEach(([t,o])=>{this.objectCheck(o)?e[t]=o:(e.base[t]=o,delete e[t])}),this.flatten(Object.entries(e)).sort((t,o)=>t.key.toUpperCase().localeCompare(o.key.toUpperCase()))}async resetDatabase(){const e=await D.query({endpoint:j.database_clear,body:{confirm:!0}}).fetch();this.showToast({type:e.error?"error":"success",content:e.error?e.error:"Database reset"})}showToast(e){this.$toast.add(S(w({},e),{timeout:5e3}))}objectCheck(e){return e&&typeof e=="object"&&!Array.isArray(e)}flatten(e){return e.reduce((t,[o,r])=>{const n={key:o,content:void 0};return this.objectCheck(r)?n.content=this.flatten(Object.entries(r)):n.content=r,t.push(n),t},[])}};V=le([P({components:{StateColorModeSelector:ne}})],V);const ie=V,m=e=>(q("data-v-2cafc35e"),e=e(),E(),e),ce={class:"d-flex align-center justify-space-between"},de=m(()=>s("span",{class:"d-flex align-center"},[s("i",{class:"pi pi-settings-3-line pi-2x text--grey-40"}),s("h1",{class:"ml-1"},"Settings")],-1)),pe={class:"font-weight-semibold"},ue=m(()=>s("span",{class:"text--grey-40"},"Orion Version:",-1)),he={class:"ml-1"},me={class:"mt-4"},_e=m(()=>s("h3",{class:"font-weight-semibold"},"Color theme",-1)),fe={class:"font-weight-semibold setting--section-title my-1"},ye={class:"setting--section-content font--secondary caption"},ge={class:"pa-2"},ve={key:0},be={class:"ml-1"},Ce={key:1},we={class:"ml-1"},Se={class:"mt-4"},$e=m(()=>s("h3",{class:"font-weight-semibold"},"Reset database",-1)),Me=m(()=>s("div",{class:"d-flex align-end my-1 text--error"},[s("i",{class:"pi pi-error-warning-line pi-lg"}),s("span",{class:"ml-1"}," Resetting the database will permanently delete all data stored in Orion ")],-1)),Oe=C(" Show "),ke={key:1},De=m(()=>s("div",null," Are you sure you want to permanently delete your data? ",-1)),je=m(()=>s("div",null,[C(" If so, type the word "),s("span",{class:"text--error"},"CONFIRM"),C(" to proceed. ")],-1)),Ie=C(" Reset Database "),Ve=C(" Cancel ");function xe(e,t,o,r,n,i){const c=b("StateColorModeSelector"),g=b("Button"),d=b("Input");return a(),l("div",null,[s("header",ce,[de,s("span",pe,[ue,s("span",he,u(e.version),1)])]),s("section",me,[_e,$(c)]),(a(!0),l(y,null,f(e.settingsSections,p=>(a(),l("section",{key:p.label,class:"mt-4 setting--section my-2"},[s("h3",fe,u(p.key),1),s("section",ye,[s("div",ge,[(a(!0),l(y,null,f(p.content,v=>(a(),l("div",{key:v.key},[Array.isArray(v.content)?(a(),l("div",ve,[(a(!0),l(y,null,f(v.content,M=>(a(),l("section",{key:M.key,class:"setting--section-subsection"},[s("span",null,u(M.key)+":",1),s("span",be,u(M.content),1)]))),128))])):(a(),l("div",Ce,[s("span",null,u(v.key)+":",1),s("span",we,u(v.content),1)]))]))),128))])])]))),128)),s("section",Se,[$e,Me,e.showResetSection?N("",!0):(a(),k(g,{key:0,color:"primary",height:"36px",width:"100px",class:"mt-1",onClick:t[0]||(t[0]=p=>e.showResetSection=!0),miter:""},{default:_(()=>[Oe]),_:1})),e.showResetSection?(a(),l("section",ke,[De,je,$(d,{modelValue:e.resetDatabaseConfirmation,"onUpdate:modelValue":t[1]||(t[1]=p=>e.resetDatabaseConfirmation=p),placeholder:"CONFIRM",class:"my-2",style:{"max-width":"400px"}},null,8,["modelValue"]),s("div",null,[$(g,{color:"primary",height:"36px",disabled:e.resetDatabaseConfirmation!=="CONFIRM",miter:"",onClick:e.resetDatabase},{default:_(()=>[Ie]),_:1},8,["disabled","onClick"]),$(g,{color:"secondary",height:"36px",width:"100px",class:"ml-2",miter:"",onClick:t[2]||(t[2]=p=>e.showResetSection=!1)},{default:_(()=>[Ve]),_:1})])])):N("",!0)])])}var qe=T(ie,[["render",xe],["__scopeId","data-v-2cafc35e"]]);export{qe as default};

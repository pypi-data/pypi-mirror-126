import{e as Z,M as ee,f as te,ae as se,s as n,D as ne,H as oe,r as u,o as l,c,d as t,a as o,w as a,A as ae,a7 as le,u as s,t as i,J as re,F as M,p as ie,b as ue,n as B,l as ce,m as q,q as V,g as _}from"./vendor.9c8de484.js";import{_ as de,A as p,E as v,s as P}from"./index.992e7f6f.js";import{T as _e}from"./Timeline.57f70d80.js";const m=y=>(ie("data-v-1e41a11a"),y=y(),ue(),y),pe={class:"main-grid"},me={class:"d-flex align-center justify-space-between py-1 px-2"},fe={class:"d-inline-flex flex-column"},he={class:"flex-grow-0 flex-shrink-1"},ve={class:"d-inline-flex align-center text-truncate"},ye={class:"caption font--primary font-weight-semibold text--grey-40 mt-1 d-flex text-truncate"},xe={key:0},we={key:1,class:"text--grey-80 mr-1"},be={key:2},ke={key:3,class:"text--grey-80"},ge={class:"font--secondary"},Te={class:"d-flex align-center justify-space-between py-1 px-2"},Ie=m(()=>t("div",{class:"subheader"},"Timeline",-1)),Ce={class:"timeline-content pb-2 px-2 d-flex flex-grow-1"},Re={style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute"},class:"text-center"},Se=m(()=>t("div",null,"View Schematic ",-1)),Be=m(()=>t("i",{class:"pi pi-task mr-1 text--grey-40"},null,-1)),qe=V(" Task Runs "),Ve=m(()=>t("i",{class:"pi pi-flow-run mr-1 text--grey-40"},null,-1)),De=V(" Sub Flow Runs "),Fe={class:"font--secondary caption my-2",style:{"min-height":"17px"}},Ne={class:"results-section d-flex flex-column align-stretch justify-stretch"},je={class:"text-center my-8",key:"no-results"},Ee=m(()=>t("h2",null," No Results Found ",-1)),Ae=[Ee],Le=m(()=>t("hr",{class:"results-hr mt-3"},null,-1)),Ue=Z({async setup(y){let x,D;const F=ee(),r=te(null),w=F.params.id,f=([x,D]=se(()=>p.query({endpoint:v.flow_run,body:{id:w},options:{pollInterval:5e3}}).fetch()),x=await x,D(),x),$=f.response.value.flow_id,N=f.response.value.deployment_id,z={id:$},G={id:N},C=n(()=>({flow_runs:{id:{any_:[w]}}}));n(()=>({flow_runs:{}}));const b={flow:p.query({endpoint:v.flow,body:z}),deployment:p.query({endpoint:v.deployment,body:G,options:{paused:!N}}),task_runs_count:p.query({endpoint:v.task_runs_count,body:C.value,options:{pollInterval:1e4}}),task_runs:p.query({endpoint:v.task_runs,body:C.value,options:{pollInterval:1e4}})},k=n(()=>{var e;return r.value&&((e=b[r.value])==null?void 0:e.response)||0}),g=n(()=>{var e;return((e=b.deployment.response)==null?void 0:e.value)||{}}),R=n(()=>{var e,h;return(h=(e=g.value)==null?void 0:e.flow_data)==null?void 0:h.blob}),d=n(()=>{var e;return((e=f.response)==null?void 0:e.value)||{}}),J=n(()=>d.value.end_time),T=n(()=>{var e;return(e=d.value)==null?void 0:e.state}),K=n(()=>{var e;return((e=d.value)==null?void 0:e.tags)||[]}),O=n(()=>{var e;return((e=b.task_runs_count.response)==null?void 0:e.value)||0}),j=n(()=>{var e;return((e=b.task_runs.response)==null?void 0:e.value)||[]}),Q=n(()=>T.value.type=="PENDING"||T.value.type=="SCHEDULED"?"--":d.value.total_run_time?P(d.value.total_run_time):P(d.value.estimated_run_time));return ne(()=>{f.stopPolling(),p.queries.delete(f.id)}),oe(()=>{var e;r.value=((e=F.hash)==null?void 0:e.substr(1))||"task_runs"}),(e,h)=>{var U;const W=u("Tag"),S=u("Card"),E=u("IconButton"),A=u("router-link"),L=u("Tab"),X=u("Tabs"),Y=u("results-list");return l(),c(M,null,[t("div",pe,[o(S,{class:"details",shadow:"sm"},{default:a(()=>{var I;return[t("div",me,[t("div",fe,[t("div",he,[t("span",{class:B(["run-state correct-text caption mr-1",((I=s(T).type)==null?void 0:I.toLowerCase())+"-bg"])},i(s(T).name),3),t("span",ve,[(l(!0),c(M,null,ce(s(K),H=>(l(),q(W,{key:H,color:"secondary-pressed",class:"font--primary caption font-weight-semibold mr-1",icon:"pi-label",flat:""},{default:a(()=>[V(i(H),1)]),_:2},1024))),128))])]),t("div",ye,[s(g).name?(l(),c("span",xe," Deployment: ")):_("",!0),s(g).name?(l(),c("span",we,i(s(g).name),1)):_("",!0),s(R)?(l(),c("span",be," Results: ")):_("",!0),s(R)?(l(),c("span",ke,i(s(R)),1)):_("",!0)])]),t("div",ge,i(s(Q)),1)])]}),_:1}),o(S,{class:"timeline d-flex flex-column",width:"auto",shadow:"sm"},{header:a(()=>[t("div",Te,[Ie,o(A,{to:`/flow-run/${s(w)}/timeline`},{default:a(()=>[o(E,{icon:"pi-full-screen"})]),_:1},8,["to"])])]),default:a(()=>[t("div",Ce,[s(j).length?(l(),q(_e,{key:0,items:s(j),"max-end-time":s(J),"hide-header":"","axis-position":"bottom","background-color":"blue-5"},null,8,["items","max-end-time"])):_("",!0)])]),_:1}),o(S,{class:"schematic",shadow:"sm"},{default:a(()=>[t("div",Re,[o(A,{to:`/flow-run/${s(w)}/schematic`},{default:a(()=>[o(E,{icon:"pi-full-screen"}),Se]),_:1},8,["to"])])]),_:1})]),o(X,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=I=>r.value=I),class:"mt-3"},{default:a(()=>[o(L,{href:"task_runs",class:"subheader"},{default:a(()=>[Be,qe,t("span",{class:B(["result-badge caption ml-1",{active:r.value=="task_runs"}])},i(s(O).toLocaleString()),3)]),_:1}),o(L,{disabled:"",href:"sub_flow_runs",class:"subheader"},{default:a(()=>[Ve,De,t("span",{class:B(["result-badge caption ml-1",{active:r.value=="flow_runs"}])},null,2)]),_:1})]),_:1},8,["modelValue"]),t("div",Fe,[ae(t("span",null,i((U=s(k).value)==null?void 0:U.toLocaleString())+" Result"+i(s(k).value!==1?"s":""),513),[[le,s(k).value>0]])]),t("section",Ne,[o(re,{name:"tab-fade",mode:"out-in",css:""},{default:a(()=>[s(k)===0?(l(),c("div",je,Ae)):r.value=="task_runs"?(l(),q(Y,{key:"flows",filter:s(C),component:"task-run-list-item",endpoint:"task_runs"},null,8,["filter"])):_("",!0)]),_:1})]),Le],64)}}});var $e=de(Ue,[["__scopeId","data-v-1e41a11a"]]);export{$e as default};

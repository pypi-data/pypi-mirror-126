(this.webpackJsonpezbeq=this.webpackJsonpezbeq||[]).push([[0],{352:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),s=n(15),i=n.n(s),o=(n(213),n(16)),l=n(5),u=n(27),d=n(79),j=n(187),b=n(415),p=n(13),f=n.n(p),O=n(19),h=n(75),m="/api",v=new function e(){var t=this;Object(h.a)(this,e),this.getAuthors=function(){return t.doGet("authors")},this.getLanguages=function(){return t.doGet("languages")},this.getYears=function(){return t.doGet("years")},this.getAudioTypes=function(){return t.doGet("audiotypes")},this.getContentTypes=function(){return t.doGet("contenttypes")},this.getMeta=function(){return t.doGet("meta")},this.getVersion=function(){return t.doGet("version")},this.doGet=function(){var e=Object(O.a)(f.a.mark((function e(t){var n,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1,e.next=3,fetch("".concat(m,"/").concat(n,"/").concat(t),{method:"GET"});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("EzBeq.get".concat(t," failed, HTTP status ").concat(a.status));case 6:return e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.appendTo=function(e,t,n){if(n&&n.length>0){var a=n.map((function(e){return"".concat(t,"=").concat(e)})).join("&");return"".concat(e).concat(-1===e.indexOf("?")?"?":"&").concat(a)}return e},this.search=Object(O.a)(f.a.mark((function e(){var n,a,c,r,s,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:null,a=i.length>1&&void 0!==i[1]?i[1]:null,c=i.length>2&&void 0!==i[2]?i[2]:null,r=t.appendTo(t.appendTo(t.appendTo("".concat(m,"/1/search"),"authors",n),"years",a),"audioTypes",c),e.next=6,fetch(r,{method:"GET"});case 6:if((s=e.sent).ok){e.next=9;break}throw new Error("EzBeq.search failed, HTTP status ".concat(s.status));case 9:return e.abrupt("return",s.json());case 10:case"end":return e.stop()}}),e)}))),this.load=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.search());case 1:case"end":return e.stop()}}),e)}))),this.sendFilter=function(){var e=Object(O.a)(f.a.mark((function e(n,a,c){var r,s,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=i.length>3&&void 0!==i[3]?i[3]:null)){e.next=7;break}return e.next=4,t.doPatch(n,t.createPatchPayload(c,r,a));case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,fetch("".concat(m,"/1/devices/").concat(n,"/filter/").concat(c),{method:"PUT",body:JSON.stringify({entryId:a}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 9:if((s=e.sent).ok){e.next=12;break}throw new Error("EzBeq.sendFilter failed, HTTP status ".concat(s.status));case 12:return e.abrupt("return",s.json());case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.sendBiquads=function(){var e=Object(O.a)(f.a.mark((function e(t,n,a,c,r,s){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/1/devices/").concat(t,"/biquads"),{method:"PUT",body:JSON.stringify({overwrite:s,slot:"".concat(n),inputs:a,outputs:c,biquads:r}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((i=e.sent).ok){e.next=5;break}throw new Error("EzBeq.sendBiquads failed, HTTP status ".concat(i.status));case 5:return e.abrupt("return",i.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r,s){return e.apply(this,arguments)}}(),this.clearSlot=function(){var e=Object(O.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/1/devices/").concat(t,"/filter/").concat(n),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.clearSlot failed, HTTP status ".concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.activateSlot=function(){var e=Object(O.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/1/devices/").concat(t,"/config/").concat(n,"/active"),{method:"PUT"});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.setGains=function(){var e=Object(O.a)(f.a.mark((function e(n,a,c){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doPatch(n,t.createPatchPayload(a,c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.doPatch=function(){var e=Object(O.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/1/devices/").concat(t),{method:"PATCH",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.createPatchPayload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={};t.hasOwnProperty("master_mv")&&(a.masterVolume=parseFloat(t.master_mv)),t.hasOwnProperty("master_mute")&&(a.mute=t.master_mute);var c={id:String(e),gain1:parseFloat(t.inputOne_mv),gain2:parseFloat(t.inputTwo_mv),mute1:t.inputOne_mute,mute2:t.inputTwo_mute};return a.slots=n?[Object.assign({},c,{entry:n})]:[c],a},this.loadWithMV=function(){var e=Object(O.a)(f.a.mark((function e(n,a,c,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendFilter(n,a,c,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),this.getDevices=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("devices",2));case 1:case"end":return e.stop()}}),e)}))),this.getLevels=function(){var e=Object(O.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("devices/".concat(n,"/levels")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=n(414),x=n(416),w=function(){var e=Object(O.a)(f.a.mark((function e(t,n,a){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:c=e.sent,t(c),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),S=function(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n).value:t}catch(a){return console.log(a),t}})),a=Object(l.a)(n,2),r=a[0],s=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;s(n),window.localStorage.setItem(e,JSON.stringify({value:n}))}catch(a){console.log(a)}}]},y=n(404),A=n(191),E=Object(d.a)((function(e){return{noLeft:{marginLeft:"0px"}}})),C=function(){var e=E(),t=Object(c.useState)({}),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)({}),o=Object(l.a)(i,2),u=o[0],d=o[1],j=function(e){return e.toString().padStart(2,"0")};if(Object(c.useEffect)((function(){w(s,v.getMeta)}),[]),Object(c.useEffect)((function(){w(d,v.getVersion)}),[]),r||u){var b=r&&r.version?r.version.substring(0,7):"";return Object(a.jsxs)(y.a,{container:!0,justify:"space-around",className:e.noLeft,children:[Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(A.a,{variant:"caption",color:"textSecondary",children:r?"".concat(function(e){if(e){var t=new Date(0);return t.setUTCSeconds(e),"".concat(t.getFullYear()).concat(j(t.getMonth()+1)).concat(j(t.getDate()),"_").concat(j(t.getHours())).concat(j(t.getMinutes())).concat(j(t.getSeconds()))}return"?"}(r.loaded)," / ").concat(b):""})}),Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(A.a,{variant:"caption",color:"textSecondary",children:"UNKNOWN"!==u.version?"v".concat(u.version):u.version})})]})}return null},T=n(417),N=n(418),k=n(184),I=n.n(k),D=n(185),P=n.n(D),L=n(186),V=n.n(L),R=n(421),F=n(54),G=n(173),M=n.n(G),z=function(e){var t=e.err,n=e.setErr,r=Object(c.useState)(null),s=Object(l.a)(r,2),i=s[0],o=s[1];Object(c.useEffect)((function(){t?(console.error(t),o(t.message)):o(null)}),[t,o]);var u=function(e,t){n(null)};return Object(a.jsx)(R.a,{open:null!==i,autoHideDuration:1e4,onClose:u,message:t?t.message:null,action:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(F.a,{size:"small","aria-label":"close",color:"inherit",onClick:u,children:Object(a.jsx)(M.a,{fontSize:"small"})})})})},B=n(405),U=n(406),_=n(422),Q=n(80),q=n(123),W=n(55),K=Object(d.a)((function(e){return{noLeftTop:{marginLeft:"0px",marginTop:"0px"},title:{flexGrow:1,marginLeft:e.spacing(1)},device:Object(u.a)({flexGrow:1,margin:e.spacing(1)},e.breakpoints.down("sm"),{flexGrow:.5}),white:{color:e.palette.common.white},smallAvatar:{width:e.spacing(3),height:e.spacing(3)}}})),Y=function(e){var t=e.availableDeviceNames,n=e.setSelectedDeviceName,c=e.selectedDeviceName,r=e.children,s=K();return Object(a.jsx)(B.a,{position:"static",className:s.noLeftTop,children:Object(a.jsxs)(U.a,{children:[Object(a.jsx)(_.a,{alt:"beqcatalogue",variant:"rounded",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAHmUExURRUoRhsuTgQUKAIGEwcTJwkUKDhCUgAAABUnRRcqSxMnRAoVKhcoRRYpSQUNHBEeNCIRIgcSJBIkRBwoPRQoRwsVJwEGKRgrTBIfPa8ABf+gLFw5JhUiOK7XAP+lKwwaMQIDBsUDAxEkRgoiSPudLE5pEz6uyM8DAwYKGmeCCwUIDRAiQRgkORxjihcpRwwlQwMQIDosXf+rLJZq2QsfODUQHx0uQd4CAAsaJxxWa0C0ztICAj9UGbQABEO61LjjACAlLiYsNxYmISUzVlULGEZiFbsCBAEWKgsZLLXfAC0pTAEOKAoqSlU6KL3pAC80P8w0c8h3Lh0SJBpJYE01KE45Kb1yLl5GKWd9A22HBi5BGz9PaotaKj1LY0dUax8yUSUwQyAoScgCAmomT8IzcLstZNg3eVtDjY1lzSdifxQTJXVMpjqivBdAVJ8GCseAMsuDMismKcEDBGILFyp1jC4RIXORC9kDAowDDJi8AjYrKOQDAYEIER1okNOFLKDIAt6QKxceKZZmKrlvLjFBXzBBX1ENGqgxaSQeNUIfN4soVyVeeoFev5gtYLAsYmRMmVkaMDo5Qp5x4wYRKjwgOWVQPgwrPG5JnlhHP1I8MxxWgFduG7huLhE2U5ZiOjhVLcJ0LjyqxOcUrVYAAAJzSURBVDjLhdP3V9pQFAfwEPNqyECCIEsQmYIaREBExAoiInXvvbd111FX1e699/pXe2MYaj3t94d7cl8+eUlOcrHc/wQTiqv9xjVpN6VBZOzhuOSvjD8YqxdBZFhRqqAoiqTcbjeVCSwO1wvANVqK8RiGMcrJZDIpHKXCk4pRE4BIg0JcZR53zHRMu7OEVzTUA5hQk+enqcmZuY65Z01sdg9SPQGgSkqmLng5+2p2uqJImQXSKgD5KcBQDR6PJ4/jsoKU5l8ApPSFd8E7L6Oz4hJQUpIFr/fdaxmNQEhZlr26A4bNL39e9lTQCIQGQqZAWRoouoPB4CcOIUQkgouLzyUkKS27AEj17Rp73Z0SGtGylRq7vaZbw14GEhEkqqtlK3V2e103IYLC9C3Ib0flRz8LhPjKIT6uSH0JmL8PDgwODe0M7tiiA07nQPQ95ysEkCcC3lx1r9nQ5nS2GZrv1jYbDDdrC1RIlQI8z/DKawAtEwFjtpjNFstvW6MtGoUyhDfabI3VBJECjOXt2vr6Wvuvzvudra1QRjZ+9PX1beAoAz4arTpj/4nRWnl2Vmk1nvQbddbK/luqDPiis+p0vccARkYAHPfqYKE3A+Ahv+r1Pfi+vlV/egplH++BHj5KeoeWD2GtVru9F9bGY7G4Nry3DW3Yj4s7JNRMy5uAIxSIxXcdB4eHB47deCwQcgQeNanoEgAyAE+niouL/auOzdDWVmjTseqHdsrfhBIuYS4YllQ+kcu78CW5XI4QlCW8S+gJxJ0PTg4PwofjCIcQhFBVQoEfwySOnkvDs2oNfTWowpQe3twcDt4o50pM2en+V/4ADiuBy0gwQ9YAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=",className:s.smallAvatar}),t.length>1?Object(a.jsx)(Q.a,{className:s.device,children:Object(a.jsx)(q.a,{labelId:"device-select-label",id:"device-select",value:c||t[0],onChange:function(e){return n(e.target.value)},autoWidth:!0,classes:{select:s.white,icon:s.white},children:t.map((function(e){return Object(a.jsx)(W.a,{value:e,children:e},e)}))})}):t&&0!==t.length?Object(a.jsx)(A.a,{className:s.title,variant:"h6",noWrap:!0,children:"ezbeq"}):null,r]})})},J=n(21),H=n(196),Z=n(420),X=n(174),$=n.n(X),ee=n(175),te=n.n(ee),ne=n(194),ae=function(e){var t=e.items,n=e.selectedValues,c=e.label,r=e.placeholder,s=void 0===r?"":r,i=e.noOptionsText,o=e.limitTags,l=e.onToggleOption,u=e.onCreateOption,d=e.onClearOptions,j=e.getOptionLabel,b=void 0===j?function(e){return e}:j,p=e.isInView,f=void 0===p?function(e){return!0}:p;return Object(a.jsx)(Z.a,{multiple:!0,size:"small",disableCloseOnSelect:!0,freeSolo:"undefined"!==typeof d,selectOnFocus:!0,handleHomeEndKeys:!0,limitTags:o,options:t,value:n,noOptionsText:i,onChange:function(e,t,n){"select-option"===n||"remove-option"===n?l&&l(t):"clear"===n?d&&d():"create-option"===n?u&&u(t):console.log("Event: ".concat(e," Value: ").concat(t," Reason: ").concat(n))},renderOption:function(e,t){var n,c=t.selected;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ne.a,{color:"primary",icon:Object(a.jsx)($.a,{fontSize:"small"}),checkedIcon:Object(a.jsx)(te.a,{fontSize:"small"}),style:{marginRight:8},checked:c}),Object(a.jsx)("div",{style:(n=e,{textDecoration:f(n)?"none":"line-through"}),children:b(e)})]})},renderInput:function(e){return Object(a.jsx)(H.a,Object(J.a)(Object(J.a)({},e),{},{label:c,placeholder:s}))},getOptionLabel:b})};ae.defaultProps={limitTags:5,items:[],selectedValues:[]};var ce=ae,re=function(e){var t=e.visible,n=e.selectedAudioTypes,r=e.setSelectedAudioTypes,s=e.selectedFreshness,i=e.setSelectedFreshness,u=e.selectedYears,d=e.setSelectedYears,j=e.selectedLanguages,b=e.setSelectedLanguages,p=e.selectedAuthors,f=e.setSelectedAuthors,O=e.selectedContentTypes,h=e.setSelectedContentTypes,m=e.filteredEntries,g=e.setError,x=["Fresh","Updated","Stale"],S=Object(c.useState)([]),y=Object(l.a)(S,2),A=y[0],E=y[1],C=Object(c.useState)([]),T=Object(l.a)(C,2),N=T[0],k=T[1],I=Object(c.useState)([]),D=Object(l.a)(I,2),P=D[0],L=D[1],V=Object(c.useState)([]),R=Object(l.a)(V,2),F=R[0],G=R[1],M=Object(c.useState)([]),z=Object(l.a)(M,2),B=z[0],U=z[1],_=Object(c.useState)([]),Q=Object(l.a)(_,2),q=Q[0],W=Q[1],K=Object(c.useState)([]),Y=Object(l.a)(K,2),J=Y[0],H=Y[1],Z=Object(c.useState)([]),X=Object(l.a)(Z,2),$=X[0],ee=X[1],te=Object(c.useState)([]),ne=Object(l.a)(te,2),ae=ne[0],re=ne[1];Object(c.useEffect)((function(){w(E,v.getAuthors,g)}),[g]),Object(c.useEffect)((function(){w(k,v.getLanguages,g)}),[g]),Object(c.useEffect)((function(){w(L,v.getYears,g)}),[g]),Object(c.useEffect)((function(){w(G,v.getAudioTypes,g)}),[g]),Object(c.useEffect)((function(){w(U,v.getContentTypes,g)}),[g]),Object(c.useEffect)((function(){w(W,(function(){return Object(o.a)(new Set(m.map((function(e){return e.year}))))}),g),w(H,(function(){return Object(o.a)(new Set(m.map((function(e){return e.audioTypes})).flat()))}),g),w(re,(function(){return Object(o.a)(new Set(m.map((function(e){return e.freshness})).flat()))}),g),w(ee,(function(){return Object(o.a)(new Set(m.map((function(e){return e.language}))))}),g)}),[m,g]);return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ce,{items:B,selectedValues:O,label:"Content Types",onToggleOption:function(e){return h(e)},onClearOptions:function(){return h([])}}),Object(a.jsx)(ce,{items:A,selectedValues:p,label:"Author",onToggleOption:function(e){return f(e)},onClearOptions:function(){return f([])}}),Object(a.jsx)(ce,{items:P,selectedValues:u,label:"Year",onToggleOption:function(e){return d(e)},onCreateOption:function(e){return function(e){var t=P.filter((function(t){return e.some((function(e){return e===t||"".concat(t).indexOf(e)>-1}))}));d(t)}(e)},onClearOptions:function(){return d([])},getOptionLabel:function(e){return"".concat(e)},isInView:function(e){return 0===q.length||q.indexOf(e)>-1}}),Object(a.jsx)(ce,{items:F,selectedValues:n,label:"Audio Types",onToggleOption:function(e){return r(e)},onCreateOption:function(e){return function(e){var t=F.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));r(t)}(e)},onClearOptions:function(){return r([])},isInView:function(e){return 0===J.length||J.indexOf(e)>-1}}),Object(a.jsx)(ce,{items:x,selectedValues:s,label:"Fresh",onToggleOption:function(e){return i(e)},onCreateOption:function(e){return function(e){var t=x.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));i(t)}(e)},onClearOptions:function(){return i([])},isInView:function(e){return 0===ae.length||ae.indexOf(e)>-1}}),Object(a.jsx)(ce,{items:N,selectedValues:j,label:"Language",onToggleOption:function(e){return b(e)},onCreateOption:function(e){return function(e){var t=N.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));b(t)}(e)},onClearOptions:function(){return b([])},isInView:function(e){return 0===$.length||$.indexOf(e)>-1}})]}):null},se=n(101),ie=n(357),oe=n(98),le=n.n(oe),ue=n(3),de=n(6),je=n(409),be=n(356),pe=n(66),fe=n(63),Oe=n.n(fe),he=n(177),me=n.n(he),ve=n(178),ge=n.n(ve),xe=Object(d.a)((function(e){return{padTop:{paddingTop:e.spacing(1),width:"100%"},withoutLabel:{marginTop:e.spacing(1)},sized:{margin:e.spacing(.5),width:"22.5%"},zeroPad:{padding:0},tightPad:{paddingRight:0}}})),we=Object(de.a)({root:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:"4px"}}})(H.a),Se=function(e){var t=e.fieldName,n=e.helpText,c=e.minGain,r=e.maxGain,s=e.step,i=e.dp,o=e.savedValues,l=e.values,u=e.setMV,d=e.setMute,j=xe(),b=1.1.toLocaleString().substring(1,2),p="."===b?/\./g:new RegExp(b,"g"),f=1/s,O=parseFloat(l.mv)!==parseFloat(o.mv)||l.mute!==o.mute,h=function(e,t){var n=Math.round(e*f)/f;u(n>r?r.toFixed(t):n<c?c.toFixed(t):n.toFixed(t))};return Object(a.jsx)(we,{className:Object(ue.a)(j.sized,j.withoutLabel,j.tightPad),variant:"outlined",id:t,value:l.mv,onChange:function(e){return function(e){if(e)if("-"===e)u(e);else if(0===r&&e.match("^[0-9]$"))u("-".concat(e));else{var t=(e.match(p)||[]).length;if(0===t){var n=parseFloat(e);isNaN(n)||h(n,0)}else if(1===t)if(e.charAt(e.length-1)===b)u(e);else{var a=parseFloat(e);if(!isNaN(a))if(i>1){var c=l.mv;Math.abs(a)<Math.abs(c)||e.length<c.toString().length?u(e):h(a,i)}else h(a,i)}}else u("")}(e.target.value)},"aria-describedby":"".concat(t,"-helper-text"),InputProps:{endAdornment:Object(a.jsx)(je.a,{position:"end",children:Object(a.jsx)(F.a,{"aria-label":"mute channel",onClick:function(e){return d(!l.mute)},className:j.zeroPad,color:O?"secondary":"default",children:l.mute?Object(a.jsx)(me.a,{fontSize:"small"}):Object(a.jsx)(ge.a,{fontSize:"small"})})})},inputProps:{"aria-label":t,pattern:"",inputMode:"numeric"},margin:"dense",size:"small",label:n})},ye=function(e){var t=e.selectedSlotId,n=e.deviceGains,r=e.gains,s=e.setGains,i=e.sendGains,o=e.isActive,u=xe(),d=Object(c.useState)(!0),j=Object(l.a)(d,2),b=j[0],p=j[1];return Object(c.useEffect)((function(){p(isNaN(r.master_mv)||isNaN(r.inputOne_mv)||isNaN(r.inputTwo_mv))}),[r]),null!==t?Object(a.jsx)("div",{className:u.padTop,children:Object(a.jsx)(Q.a,{component:"fieldset",children:Object(a.jsxs)(be.a,{row:!0,children:[Object(a.jsx)(Se,{fieldName:"master-gain",helpText:"Master",minGain:-127,maxGain:0,step:.5,dp:1,savedValues:{mv:n.master_mv,mute:n.master_mute},values:{mv:r.master_mv,mute:r.master_mute},setMV:function(e){return s(Object(J.a)(Object(J.a)({},r),{master_mv:e}))},setMute:function(e){return s(Object(J.a)(Object(J.a)({},r),{master_mute:e}))}}),Object(a.jsx)(Se,{fieldName:"input1-gain",helpText:"Input 1",minGain:-72,maxGain:12,step:.25,dp:2,savedValues:{mv:n.inputOne_mv,mute:n.inputOne_mute},values:{mv:r.inputOne_mv,mute:r.inputOne_mute},setMV:function(e){return s(Object(J.a)(Object(J.a)({},r),{inputOne_mv:e}))},setMute:function(e){return s(Object(J.a)(Object(J.a)({},r),{inputOne_mute:e}))}}),Object(a.jsx)(Se,{fieldName:"input2-gain",helpText:"Input 2",minGain:-72,maxGain:12,step:.25,dp:2,savedValues:{mv:n.inputTwo_mv,mute:n.inputTwo_mute},values:{mv:r.inputTwo_mv,mute:r.inputTwo_mute},setMV:function(e){return s(Object(J.a)(Object(J.a)({},r),{inputTwo_mv:e}))},setMute:function(e){return s(Object(J.a)(Object(J.a)({},r),{inputTwo_mute:e}))}}),Object(a.jsx)(pe.a,{variant:"outlined",size:"small",color:"primary",className:u.sized,onClick:function(){return i(t,r)},disabled:b,startIcon:o()?Object(a.jsx)(ie.a,{size:24}):Object(a.jsx)(Oe.a,{fontSize:"small"}),children:"Apply"})]})})}):Object(a.jsx)("div",{})},Ae=Object(d.a)((function(e){return{root:{display:"flex",width:"100%"},container:{paddingLeft:4,paddingRight:4},fullWidth:{marginRight:0}}})),Ee=Object(d.a)((function(e){return{paper:function(t){return{margin:"".concat(e.spacing(.5),"px auto"),padding:e.spacing(.5),flexGrow:1,backgroundColor:t.selected?e.palette.action.selected:e.palette.background.default}},content:function(){return{padding:4,paddingLeft:8,"&:last-child":{paddingBottom:4}}},right:{float:"right"}}})),Ce=function(e,t,n){var a=e.find((function(e){return e.slotId===n&&e.action===t}));return a?a.state:-1},Te={master_mv:0,master_mute:!1,inputOne_mv:0,inputOne_mute:!1,inputTwo_mv:0,inputTwo_mute:!1},Ne=function(e){var t=e.selected,n=e.slot,c=e.onSelect,r=e.isPending,s=e.onClear,i=Ee({selected:t});return Object(a.jsx)(se.a,{className:"".concat(i.paper),children:Object(a.jsxs)(y.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(a.jsx)(y.a,{item:!0,onClick:c,xs:8,className:"".concat(i.content),children:Object(a.jsxs)(A.a,{component:"p",variant:"body2",children:[n.id,": ",n.last]})}),Object(a.jsx)(y.a,{item:!0,xs:4,children:Object(a.jsx)(F.a,{onClick:s,disabled:r,className:i.right,children:r?Object(a.jsx)(ie.a,{size:32}):Object(a.jsx)(le.a,{fontSize:"large"})})})]})})},ke=function(e){var t=e.selectedDeviceName,n=e.selectedSlotId,r=e.useWide,s=e.device,i=e.setDevice,o=e.setUserDriven,u=e.setError,d=Ae({selected:!1}),j=Object(c.useState)([]),b=Object(l.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(Te),g=Object(l.a)(m,2),x=g[0],w=g[1],S=Object(c.useState)({}),A=Object(l.a)(S,2),E=A[0],C=A[1];Object(c.useEffect)((function(){var e=Object(J.a)({},Te);if(e.master_mv=s.masterVolume,e.master_mute=s.mute,n&&s&&s.hasOwnProperty("slots")){var t=s.slots.find((function(e){return e.id===n}));t&&(e.inputOne_mute=t.mute1,e.inputTwo_mute=t.mute2,e.inputOne_mv=t.gain1,e.inputTwo_mv=t.gain2)}C(e),w(e)}),[s,n]);var T,N,k=function(){var e=Object(O.a)(f.a.mark((function e(t,n,a){var c,r,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.length>3&&void 0!==s[3]?s[3]:null,h((function(e){return[{slotId:n,action:t,state:1}].concat(e)})),e.prev=2,e.next=5,a();case 5:r=e.sent,h((function(e){return e.filter((function(e){return!(e.slotId===n&&e.action===t)}))})),i(r),c&&c(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),u(e.t0),h((function(e){return e.map((function(e){return e.slotId===n&&e.action===t?{slotId:n,action:t,state:2}:e}))}));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),I=(T="slots"in s?s.slots:[],N=2,T.reduce((function(e,t,n){return(n%N?e[e.length-1].push(t):e.push([t]))&&e}),[])).map((function(e,c){return Object(a.jsx)(y.a,{container:!0,className:d.root,children:e.map((function(c,r){return Object(a.jsx)(y.a,{container:!0,item:!0,xs:1===e.length?12:6,className:d.container,children:Object(a.jsx)(Ne,{selected:c.id===n,slot:c,onSelect:function(){return e=c.id,void k("activate",e,(function(){return v.activateSlot(t,e)}),(function(){return o(!0)}));var e},onClear:function(){return e=c.id,void k("clear",e,(function(){return v.clearSlot(t,e)}));var e},isPending:(s=c.id,1===Ce(p,"clear",s)||1===Ce(p,"activate",s))})},r);var s}))},c)}));if(s&&s.hasOwnProperty("masterVolume")){var D=Object(a.jsx)(ye,{selectedSlotId:n,deviceGains:E,gains:x,setGains:w,sendGains:function(e,n){k("gain",e,(function(){return v.setGains(t,e,n)}))},isActive:function(){return 1===Ce(p,"gain",n)}});return r?Object(a.jsxs)("div",{className:d.fullWidth,children:[I,Object(a.jsx)(y.a,{container:!0,children:D})]}):Object(a.jsxs)("div",{className:d.fullWidth,children:[Object(a.jsx)(y.a,{container:!0,direction:"column",children:I}),Object(a.jsx)(y.a,{container:!0,direction:"column",children:D})]})}return r?Object(a.jsx)(y.a,{container:!0,children:I}):Object(a.jsx)(y.a,{container:!0,direction:"column",children:I})},Ie=n(179),De=Object(d.a)((function(e){return{noLeft:{marginLeft:"0px"}}})),Pe=function(e){return e.formattedTitle},Le=function(e){var t=e.entries,n=e.setSelectedEntryId,c=e.selectedEntryId,r=e.useWide,s=e.showBottomNav,i=De(),o=[{field:"title",headerName:"Title",flex:.6,renderCell:function(e){return e.row.url?Object(a.jsx)("a",{href:e.row.avsUrl,target:"_beq",children:Pe(e.row)}):Pe(e.row)}},{field:"audioTypes",headerName:"Audio Type",flex:.4},{field:"sortTitle",hide:!0},{field:"edition",headerName:"Edition",hide:!r}];if(t.length>0){var l=s?40:0,u=Object(a.jsx)(y.a,{item:!0,style:{height:"".concat(Math.max(260,(window.innerHeight-310-l)/(-1===c||r?1:2)),"px"),width:"100%"},children:Object(a.jsx)(Ie.a,{rows:t,columns:o,pageSize:50,density:"compact",sortModel:[{field:"sortTitle",sort:"asc"}],onRowSelected:function(e){return n(e.data.id)}})});return r?u:Object(a.jsx)(y.a,{container:!0,className:i.noLeft,children:u})}return null},Ve=n(358),Re=n(419),Fe=n(410),Ge=n(411),Me=n(412),ze=n(413),Be=Object(d.a)({root:{}}),Ue=function(e){var t=[];return e.rating&&t.push(e.rating),e.runtime&&t.push("".concat(Math.floor(e.runtime/60),"h ").concat(e.runtime%60,"m")),e.language&&"English"!==e.language&&t.push(e.language),e.genres&&t.push(e.genres.join(", ")),t.push(e.author),t||e.overview?Object(a.jsxs)(a.Fragment,{children:[t?Object(a.jsx)(A.a,{variant:"body1",component:"p",children:t.join(" \u2022 ")}):null,e.overview?Object(a.jsx)(A.a,{variant:"body2",component:"p",children:e.overview}):null]}):null},_e=function(e){return e&&e.audioTypes?e.audioTypes.map((function(e){return Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),e]},e)})):null},Qe=function(e){return e&&e.mvAdjust?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),"MV Adjustment: ",e.mvAdjust>0?"+":"",e.mvAdjust," dB"]}):null},qe=function(e){return e&&e.note?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),e.note]}):null},We=function(e){return e&&e.warning?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Warning:"})," ",e.warning]}):null},Ke=function(e){var t=e.setSelectedSlot,n=e.slotIds,c=e.selectedSlot,r=e.sendGain,s=e.selectedEntry,i=e.setSendGain,o=e.device,l=e.pending,u=e.upload,d=n.map((function(e){return Object(a.jsx)(Ve.a,{value:e,control:Object(a.jsx)(Re.a,{checked:c===e,color:"primary"}),label:e},e)})),j=n.length>1?Object(a.jsx)(Fe.a,{row:!0,"aria-label":"slot",name:"slot",onChange:function(e){return t(e.target.value)},children:d}):null,b=o&&o.hasOwnProperty("masterVolume")?Object(a.jsx)(Ve.a,{control:Object(a.jsx)(ne.a,{checked:r,name:"sendMV",color:"primary",disabled:!s.mvAdjust,onChange:function(e){return i(e.target.checked)}}),label:"Set Input Gain"}):null;return Object(a.jsxs)(be.a,{row:!0,children:[j,b,Object(a.jsx)(pe.a,{variant:"contained",startIcon:l?Object(a.jsx)(ie.a,{size:24}):Object(a.jsx)(Oe.a,{fontSize:"small"}),onClick:u,children:"Upload"})]})},Ye=function(e){var t=e.selectedDeviceName,n=e.selectedEntry,r=e.useWide,s=e.setDevice,i=e.selectedSlotId,o=e.device,u=e.setError,d=Be(),j=Object(c.useState)(null),b=Object(l.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(!1),g=Object(l.a)(m,2),x=g[0],w=g[1],S=Object(c.useState)(!1),y=Object(l.a)(S,2),E=y[0],C=y[1],T=o&&o.hasOwnProperty("slots")?o.slots.map((function(e){return e.id})):[],N=o.hasOwnProperty("masterVolume");Object(c.useEffect)((function(){w(!1)}),[n]),Object(c.useEffect)((function(){h(i)}),[i]);var k,I=function(){var e=Object(O.a)(f.a.mark((function e(){var a,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={inputOne_mv:x?n.mvAdjust:0,inputOne_mute:!1,inputTwo_mv:x?n.mvAdjust:0,inputTwo_mute:!1},C(!0),e.prev=2,c=N?function(){return v.loadWithMV(t,n.id,p,a)}:function(){return v.sendFilter(t,n.id,p)},e.next=6,c();case 6:r=e.sent,C(!1),s(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),u(e.t0),C(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();if(n){var D=n.images?n.images.map((function(e,t){return Object(a.jsx)(Ge.a,{component:"img",className:d.media,image:e,title:"img".concat(t),alt:"".concat(n.title," - ").concat(t)},"img".concat(t))})):null,P=Object(a.jsxs)(Me.a,{children:[Object(a.jsxs)(A.a,{gutterBottom:!0,variant:"h5",component:"h3",children:[n.title,n.year?" (".concat(n.year,")"):""]}),n.edition?Object(a.jsx)(A.a,{variant:"h6",component:"p",children:n.edition}):null,n.altTitle&&n.altTitle!==n.title?Object(a.jsx)(A.a,{variant:"h6",component:"p",children:n.altTitle}):null,Ue(n),Object(a.jsx)("br",{}),Object(a.jsxs)(A.a,{variant:"body2",color:"textSecondary",component:"p",children:[(k=n,k&&k.season?k.episodes?/^\d+$/.test(k.episodes)?"S".concat(k.season," E").concat(k.episodes):"S".concat(k.season," ").concat(k.episodes):"S".concat(k.season):null),_e(n),Qe(n),qe(n),We(n)]})]}),L=Object(a.jsx)(Me.a,{children:Object(a.jsx)(Ke,{setSelectedSlot:h,selectedSlot:p,sendGain:x,slotIds:T,selectedEntry:n,setSendGain:w,pending:E,device:o,upload:I})}),V=Object(a.jsxs)(be.a,{row:!0,children:[n.theMovieDB?Object(a.jsx)(pe.a,{size:"small",color:"primary",href:"https://themoviedb.org/".concat("film"===n.contentType?"movie":"tv","/").concat(n.theMovieDB),target:"_avs",children:"TMDb"}):null,n.avsUrl?Object(a.jsx)(pe.a,{size:"small",color:"primary",href:n.avsUrl,target:"_avs",children:"Discuss"}):null,n.beqcUrl?Object(a.jsx)(pe.a,{size:"small",color:"primary",href:n.beqcUrl,target:"_beq",children:"Catalogue"}):null]});return r?Object(a.jsxs)(ze.a,{className:d.root,children:[P,L,V,D]}):Object(a.jsxs)(ze.a,{className:d.root,children:[L,P,V,D]})}return null},Je=n(180),He=n.n(Je),Ze=n(195),Xe=n(359),$e=n(9),et=Object(d.a)((function(e){return{search:Object(u.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object($e.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object($e.c)(e.palette.common.white,.25)},width:"40%"},e.breakpoints.up("md"),{flexGrow:1}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)")},advancedFilter:{marginLeft:"4px",marginRight:"0px"}}})),tt=function(e){var t=e.txtFilter,n=e.setTxtFilter,c=e.showFilters,r=e.toggleShowFilters,s=et();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:s.search,children:[Object(a.jsx)("div",{className:s.searchIcon,children:Object(a.jsx)(He.a,{})}),Object(a.jsx)(Ze.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},inputProps:{"aria-label":"search"},value:t,onChange:function(e){return n(e.target.value)},size:"small",fullWidth:!0})]}),Object(a.jsx)(F.a,{onClick:function(e){return n("")},children:Object(a.jsx)(le.a,{})}),Object(a.jsx)(Ve.a,{className:s.advancedFilter,control:Object(a.jsx)(Xe.a,{checked:c,onChange:r,size:"small"})})]})},nt=function(e){var t=e.entries,n=e.availableDevices,r=e.setErr,s=e.replaceDevice,i=e.selectedDeviceName,o=e.setSelectedDeviceName,u=e.showBottomNav,d=e.selectedSlotId,j=e.setSelectedSlotId,b=e.getSelectedDevice,p=Object(c.useState)([]),f=Object(l.a)(p,2),O=f[0],h=f[1],m=Object(c.useState)([]),v=Object(l.a)(m,2),x=v[0],S=v[1],A=Object(c.useState)([]),E=Object(l.a)(A,2),C=E[0],T=E[1],N=Object(c.useState)([]),k=Object(l.a)(N,2),I=k[0],D=k[1],P=Object(c.useState)([]),L=Object(l.a)(P,2),V=L[0],R=L[1],F=Object(c.useState)([]),G=Object(l.a)(F,2),M=G[0],z=G[1],B=Object(c.useState)(""),U=Object(l.a)(B,2),_=U[0],Q=U[1],q=Object(c.useState)(!1),W=Object(l.a)(q,2),K=W[0],J=W[1],H=Object(c.useState)(-1),Z=Object(l.a)(H,2),X=Z[0],$=Z[1],ee=Object(c.useState)(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=Object(c.useState)([]),se=Object(l.a)(ce,2),ie=se[0],oe=se[1];Object(c.useEffect)((function(){if(n&&!i){var e=Object.keys(n);e.length>0&&o(e[0])}}),[n,i,o]),Object(c.useEffect)((function(){var e=function(e){return!(O.length&&!(O.indexOf(e.author)>-1)||C.length&&!(C.indexOf(e.year)>-1)||I.length&&!e.audioTypes.some((function(e){return I.indexOf(e)>-1}))||V.length&&!(V.indexOf(e.contentType)>-1)||M.length&&!(M.indexOf(e.freshness)>-1)||x.length&&!(x.indexOf(e.language)>-1)||_&&!function(e){var t=_.toLowerCase();return!!e.formattedTitle.toLowerCase().includes(t)||!(!e.hasOwnProperty("altTitle")||!e.altTitle.toLowerCase().includes(t))}(e))};w(oe,(function(){return t.filter(e)}),r)}),[t,I,C,O,V,M,x,_,r]),Object(c.useEffect)((function(){var e=b();if(e&&ne&&e.hasOwnProperty("slots")){var t=e.slots.find((function(e){return e.id===d}));t&&t.last&&"ERROR"!==t.last&&"Empty"!==t.last&&Q(t.last)}}),[b,d,Q,ne]);var le=Object(g.a)("(orientation: landscape) and (min-height: 580px)"),ue=Object(a.jsx)(ke,{selectedDeviceName:i,selectedEntryId:X,selectedSlotId:d,useWide:le,setSelectedSlotId:j,setUserDriven:ae,device:b(),setDevice:function(e){return s(e)},setError:r}),de=Object(a.jsx)(Le,{entries:ie,setSelectedEntryId:$,selectedEntryId:X,useWide:le,showBottomNav:u}),je=Object(a.jsx)(Ye,{selectedDeviceName:i,selectedEntry:X?t.find((function(e){return e.id===X})):null,useWide:le,setDevice:function(e){return s(e)},selectedSlotId:d,device:b(),setError:r});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Y,{availableDeviceNames:Object.keys(n),setSelectedDeviceName:o,selectedDeviceName:i,children:Object(a.jsx)(tt,{txtFilter:_,setTxtFilter:Q,showFilters:K,toggleShowFilters:function(){J((function(e){return!e}))}})}),Object(a.jsx)(re,{visible:K,selectedAudioTypes:I,setSelectedAudioTypes:D,selectedFreshness:M,setSelectedFreshness:z,selectedYears:C,setSelectedYears:T,selectedLanguages:x,setSelectedLanguages:S,selectedAuthors:O,setSelectedAuthors:h,selectedContentTypes:V,setSelectedContentTypes:R,filteredEntries:ie,setError:r}),le?Object(a.jsxs)(y.a,{container:!0,children:[Object(a.jsxs)(y.a,{item:!0,xs:6,md:6,children:[ue,Object(a.jsx)(y.a,{container:!0,children:de})]}),Object(a.jsx)(y.a,{item:!0,xs:6,md:6,children:je})]}):Object(a.jsxs)(a.Fragment,{children:[ue,de,je]})]})},at=n(181),ct=n.n(at),rt=Object(d.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},textField:{width:"10ch"}}})),st=function(e){var t=e.duration,n=e.setDuration,r=e.recording,s=e.setRecording,i=e.direct,o=e.setDirect,u=e.showAdvanced,d=e.minidspRs,j=e.setMinidspRs,b=rt(),p=Object(c.useState)(window.location.hostname),f=Object(l.a)(p,2),O=f[0],h=f[1],m=Object(c.useState)(0),v=Object(l.a)(m,2),g=v[0],x=v[1],w=Object(c.useState)(5380),S=Object(l.a)(w,2),y=S[0],A=S[1];return Object(c.useEffect)((function(){d?(h(d.host),x(d.device),A(d.port)):(h(window.location.hostname),x(0),A(5380))}),[d]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{className:Object(ue.a)(b.root,b.margin),noValidate:!0,autoComplete:"off",children:[Object(a.jsx)(H.a,{id:"duration-seconds",label:"Duration",type:"number",inputProps:{"aria-label":"duration",min:1,step:1,max:7200},value:t,onChange:function(e){return n(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(Ve.a,{className:b.margin,control:Object(a.jsx)(Xe.a,{checked:r,onChange:function(e){return s(e.target.checked)},name:"recording",color:"primary"}),label:"Recording?"}),u?Object(a.jsx)(Ve.a,{className:b.margin,control:Object(a.jsx)(Xe.a,{checked:i,onChange:function(e){return o(e.target.checked)},name:"direct",color:"secondary",size:"small"}),label:"Direct"}):null]}),u?Object(a.jsxs)("form",{className:Object(ue.a)(b.root,b.margin),noValidate:!0,autoComplete:"off",children:[Object(a.jsx)(H.a,{className:b.margin,id:"minidsp-rs-ip",label:"minidsprs host or ip",value:O,onChange:function(e){return h(e.target.value)}}),Object(a.jsx)(H.a,{className:Object(ue.a)(b.margin,b.textField),id:"minidsp-rs-device_id",label:"device id",type:"number",min:0,step:1,max:10,value:g,onChange:function(e){return x(e.target.value)}}),Object(a.jsx)(H.a,{className:Object(ue.a)(b.margin,b.textField),id:"minidsp-rs-port",label:"port",type:"number",min:1,step:1,value:y,onChange:function(e){return A(e.target.value)},InputLabelProps:{shrink:!0}}),Object(a.jsx)(pe.a,{variant:"contained",color:"primary",startIcon:Object(a.jsx)(ct.a,{}),size:"small",onClick:function(){return j({host:O,port:y,device:g})},children:"Apply"})]}):null]})},it=n(182),ot=n.n(it),lt=(n(223),function(e){var t=e.options,n=e.data;return Object(a.jsx)(ot.a,{options:t,data:n})}),ut=n(37),dt=n(183),jt=new Error("No data in levels update"),bt=function(e){var t=e.availableDevices,n=e.selectedDeviceName,r=e.setSelectedDeviceName,s=e.setErr,i=Object(c.useState)(!0),u=Object(l.a)(i,2),d=u[0],j=u[1],b=S("chartDuration",60),p=Object(l.a)(b,2),f=p[0],O=p[1],h=S("chartDirect",!1),m=Object(l.a)(h,2),v=m[0],g=m[1],x=Object(c.useState)(60),w=Object(l.a)(x,2),y=w[0],A=w[1],E=S("chartMinidspRs",{host:window.location.hostname,device:0,port:5380}),C=Object(l.a)(E,2),T=C[0],N=C[1],k=Object(c.useState)(!1),I=Object(l.a)(k,2),D=I[0],P=I[1],L=Object(c.useState)(null),V=Object(l.a)(L,2),R=V[0],F=V[1],G=Object(c.useState)({payload:[[],[],[],[],[],[],[]],first:0}),M=Object(l.a)(G,2),z=M[0],B=M[1],U=Object(c.useRef)(null),_=Object(ut.a)(),Q={series:[{label:"Time"},{label:"I1",stroke:_.palette.primary.light,points:{show:!1}},{label:"I2",stroke:_.palette.secondary.light,points:{show:!1}},{label:"O1",stroke:_.palette.error.light,points:{show:!1}},{label:"O2",stroke:_.palette.warning.light,points:{show:!1}},{label:"O3",stroke:_.palette.info.light,points:{show:!1}},{label:"O4",stroke:_.palette.success.light,points:{show:!1}}],axes:[{label:"Time (s)",stroke:_.palette.text.primary,ticks:{stroke:_.palette.divider},grid:{stroke:_.palette.divider}},{label:"Level (dB)",stroke:_.palette.text.primary,ticks:{stroke:_.palette.divider},grid:{stroke:_.palette.divider}}],scales:{x:{time:!1}}},q=Object(c.useCallback)((function(e){Object(dt.debounce)((function(){return A(e)}),400)}),[A]);Object(c.useEffect)((function(){q(f)}),[f,q]),Object(c.useEffect)((function(){if(d&&R)if(0===Object.keys(R).length)s(jt);else if(R.hasOwnProperty("masterVolume"));else if(R.hasOwnProperty("input_levels")||R.hasOwnProperty("input")){var e=R.hasOwnProperty("input_levels")?[(new Date).getTime()/1e3].concat(Object(o.a)(R.input_levels),Object(o.a)(R.output_levels)):[R.ts].concat(Object(o.a)(R.input),Object(o.a)(R.output));B((function(t){return t.payload[0].length>0?t.payload=e.map((function(e,n){return[].concat(Object(o.a)(t.payload[n]),0===n?[e-t.first]:[e])})):(t.first=e[0],t.payload=e.map((function(e,n){return 0===n?[e-t.first]:[e]}))),function(e,t){var n=e.payload[0],a=n[0],c=n[n.length-1]-t;if(c>a){var r=n.findIndex((function(e){return e>=c}));return{first:e.first,payload:e.payload.map((function(e){return e.slice(r)}))}}return{first:e.first,payload:e.payload}}(t,y)}))}else v&&R.hasOwnProperty("master")||s(new Error("Unexpected data ".concat(R)))}),[d,R,v,s,y]),Object(c.useEffect)((function(){var e=v?"ws://".concat(T.host,":").concat(T.port,"/devices/").concat(T.device,"?levels=true"):"ws://".concat(window.location.host,"/ws");return null===U.current&&(U.current=new WebSocket(e),U.current.onerror=function(t){s(new Error("Failed to connect to ".concat(e)))},U.current.onopen=function(t){console.log("Connected to ".concat(e)),v||U.current.send("subscribe levels ".concat(n))},U.current.onclose=function(t){console.log("Closed connection to ".concat(e," - ").concat(t.code))},U.current.onmessage=function(e){return F(JSON.parse(e.data))}),function(){U.current.close(),U.current=null}}),[n,s,T,v]);var W=Object.assign({},Q,{width:window.innerWidth-16,height:window.innerHeight-233});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Y,{availableDeviceNames:Object.keys(t),setSelectedDeviceName:r,selectedDeviceName:n,children:Object(a.jsx)(Ve.a,{control:Object(a.jsx)(Xe.a,{checked:D,onChange:function(e){return P(e.target.checked)},size:"small"})})}),Object(a.jsx)(st,{duration:f,setDuration:O,recording:d,setRecording:j,direct:v,setDirect:g,showAdvanced:D,minidspRs:T,setMinidspRs:N}),Object(a.jsx)(lt,{options:W,data:z.payload})]})},pt=n(125),ft=n(407),Ot=n(424),ht=Object(d.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},root:{"& .MuiTextField-root":{margin:e.spacing(1)}}}})),mt={PaperProps:{style:{maxHeight:224,width:250}}},vt=function(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}},gt=function(e){var t=e.name,n=e.values,c=e.availableValues,r=e.onChange,s=ht(),i=Object(ut.a)();return Object(a.jsxs)(Q.a,{className:s.formControl,children:[Object(a.jsx)(pt.a,{id:"".concat(t,"-label"),children:t}),Object(a.jsx)(q.a,{labelId:"".concat(t,"-label"),id:t,multiple:!0,value:n,onChange:r,input:Object(a.jsx)(ft.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(a.jsx)("div",{className:s.chips,children:e.map((function(e){return Object(a.jsx)(Ot.a,{label:e,className:s.chip},e)}))})},MenuProps:mt,children:c.map((function(e){return Object(a.jsx)(W.a,{value:e,style:vt(e,n,i),children:e},e)}))})]})},xt=function(e){var t=e.availableDevices,n=e.setSelectedDeviceName,r=e.selectedDeviceName,s=e.selectedSlotId,i=e.setErr,o=ht(),u=S("minidspInputs",[]),d=Object(l.a)(u,2),j=d[0],b=d[1],p=S("minidspOutputs",[1,2,3,4]),h=Object(l.a)(p,2),m=h[0],g=h[1],x=Object(c.useState)(s),w=Object(l.a)(x,2),A=w[0],E=w[1],C=Object(c.useState)(""),T=Object(l.a)(C,2),N=T[0],k=T[1],I=Object(c.useState)(!0),D=Object(l.a)(I,2),P=D[0],L=D[1],V=Object(c.useState)(!1),R=Object(l.a)(V,2),F=R[0],G=R[1],M=function(){var e=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,v.sendBiquads(r,A,j,m,N,P);case 4:t=e.sent,console.debug(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i(e.t0);case 11:return e.prev=11,G(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Y,{availableDeviceNames:Object.keys(t),setSelectedDeviceName:n,selectedDeviceName:r}),Object(a.jsx)("form",{className:o.root,noValidate:!0,autoComplete:"off",children:Object(a.jsxs)(y.a,{container:!0,children:[Object(a.jsxs)(y.a,{container:!0,justify:"space-evenly",alignItems:"center",children:[Object(a.jsx)(y.a,{item:!0,children:Object(a.jsxs)(Q.a,{className:o.formControl,children:[Object(a.jsx)(pt.a,{id:"config-label",children:"Config"}),Object(a.jsx)(q.a,{labelId:"config-label",id:"config",value:A,onChange:function(e){return E(e.target.value)},children:[1,2,3,4].map((function(e){return Object(a.jsx)(W.a,{value:e,children:e},e)}))})]})}),Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(gt,{name:"Input",onChange:function(e){return b(e.target.value.sort())},availableValues:[1,2],values:j})}),Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(gt,{name:"Output",onChange:function(e){return g(e.target.value.sort())},availableValues:[1,2,3,4],values:m})}),Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(Ve.a,{control:Object(a.jsx)(Xe.a,{checked:P,onChange:function(e){return L(e.target.checked)},color:"default",name:"overwrite"}),labelPlacement:"top",label:"Overwrite?"})}),Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(pe.a,{variant:"outlined",color:"primary",onClick:M,disabled:0===N.length,startIcon:F?Object(a.jsx)(ie.a,{size:24}):Object(a.jsx)(Oe.a,{fontSize:"small"}),children:"Upload"})})]}),Object(a.jsx)(y.a,{container:!0,item:!0,children:Object(a.jsx)(H.a,{id:"biquads",label:"Biquads/Filters",multiline:!0,rows:26,fullWidth:!0,value:N,onChange:function(e){return k(e.target.value)},variant:"outlined"})})]})})]})},wt=Object(d.a)((function(e){return{root:{flexGrow:1,width:"100vw",height:"100vh"}}})),St=new WebSocket("ws://"+window.location.host+"/ws"),yt=function(){var e=Object(g.a)("(prefers-color-scheme: dark)"),t=r.a.useMemo((function(){return Object(j.a)({palette:{type:e?"dark":"light"}})}),[e]),n=function(e){F(Object.assign({},R,Object(u.a)({},e.name,e)))};St.onmessage=function(e){n(JSON.parse(e.data))};var s=wt(),i=Object(c.useState)(!1),d=Object(l.a)(i,2),p=d[0],f=d[1],O=Object(c.useState)(null),h=Object(l.a)(O,2),m=h[0],S=h[1],y=Object(c.useState)([]),A=Object(l.a)(y,2),E=A[0],k=A[1],D=Object(c.useState)({}),L=Object(l.a)(D,2),R=L[0],F=L[1],G=Object(c.useState)(null),M=Object(l.a)(G,2),B=M[0],U=M[1],_=Object(c.useState)(""),Q=Object(l.a)(_,2),q=Q[0],W=Q[1],K=Object(c.useState)("catalogue"),Y=Object(l.a)(K,2),J=Y[0],H=Y[1];Object(c.useEffect)((function(){w(k,v.load,S)}),[]),Object(c.useEffect)((function(){w(F,v.getDevices,S)}),[]),Object(c.useEffect)((function(){f(Object(o.a)(Object.keys(R)).find((function(e){return R[e].hasOwnProperty("masterVolume")})))}),[R,f]);var Z=Object(c.useCallback)((function(){return q&&R.hasOwnProperty(q)?R[q]:{}}),[q,R]);return Object(c.useEffect)((function(){var e=Z();if(e&&e.hasOwnProperty("slots")){var t=e.slots.find((function(e){return!0===e.active}));t&&U(t.id)}}),[Z,q,R]),Object(a.jsxs)(b.a,{theme:t,children:[Object(a.jsx)(x.a,{}),Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsx)(z,{err:m,setErr:S}),"catalogue"===J?Object(a.jsx)(nt,{entries:E,setErr:S,replaceDevice:n,availableDevices:R,selectedDeviceName:q,setSelectedDeviceName:W,getSelectedDevice:Z,selectedSlotId:B,setSelectedSlotId:U,showBottomNav:p}):"levels"===J?Object(a.jsx)(bt,{availableDevices:R,selectedDeviceName:q,setSelectedDeviceName:W,setErr:S}):Object(a.jsx)(xt,{availableDevices:R,selectedDeviceName:q,setSelectedDeviceName:W,selectedSlotId:B,setErr:S}),p?Object(a.jsxs)(T.a,{value:J,onChange:function(e,t){H(t)},children:[Object(a.jsx)(N.a,{label:"Catalogue",value:"catalogue",icon:Object(a.jsx)(I.a,{})}),Object(a.jsx)(N.a,{label:"Levels",value:"levels",icon:Object(a.jsx)(P.a,{})}),Object(a.jsx)(N.a,{label:"Control",value:"control",icon:Object(a.jsx)(V.a,{})})]}):null,Object(a.jsx)(C,{})]})]})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(yt,{})}),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.8348df42.chunk.js.map